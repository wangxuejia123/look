Site.productSlide={};(function(L,V,p){var z,M=-1,W,m,aq,am=null,h="",ad="",I,R,b,v,y,t,k,F,j=82;V.data={};V.dom={};var Z=Fai.top._lcid==2052||Fai.top._lcid==1028;function G(){var at=[];at.push('<div class="fk-slideForProduct" id="fk-productSlidePanel" style="display:none;">');at.push('	<div class="f-contentBg J_contentBg J_popup_bg"></div>');at.push('	<div class="f-content J_content" id="fk-productSlideContent">');at.push('		<div class="f-innerContent">');ae(at);at.push("		</div>");at.push('		<a href="javascript:;" class="f-turnLeft J_turnLeft" onclick="return false;" hidefocus="true">向右</a>');at.push('		<a href="javascript:;" class="f-turnRight J_turnRight" onclick="return false;" hidefocus="true">向左</a>');at.push('		<a href="javascript:;" class="f-close J_close" onclick="return false;" title="关闭" hidefocus="true">关闭</a>');at.push("	</div>");at.push("</div>");return at}function ae(at){at.push('<div class="f-multiContent J_multiContent">');K(at);at.push("</div>");at.push('<div class="f-albumsContent J_albumsContent">');D(at);at.push("</div>")}function K(at){at.push('<div class="f-multiContent-left J_multiContentLeft">');J(at);at.push("</div>");at.push('<div class="f-multiContent-right J_multiContentRight">');aa(at);at.push("</div>")}function J(at){at.push('<div class="f-productPicContent J_productPicContent">');at.push('	<div class="f-productImg J_productImg">');at.push('		<div class="f-productImgLoading"></div>');at.push("	</div>");at.push('	<div class="f-productImgGroup J_productImgGroup" style="display:none;">');at.push('		<div class="f-productImgGroupBg"></div>');at.push('		<div class="f-imgListWrap J_imgListWrap">');at.push("		</div>");at.push('		<a href="javascript:;" onclick="return false;" class="f-groupLeft J_groupLeft" hidefocus="true">向左</a>');at.push('		<a href="javascript:;" onclick="return false;" class="f-groupRight J_groupRight" hidefocus="true">向右</a>');at.push("	</div>");at.push("</div>");at.push('<div class="f-shareContent J_shareContent">');at.push("</div>")}function aa(at){at.push('<div class="f-productDetailContent J_productDetailContent">');at.push("</div>");at.push('<div class="optionMsg"></div>');at.push('<div class="f-productBuyContent J_productBuyContent">');at.push("</div>")}function U(){if(!V.data.nowData){return""}var aR=[],aJ=[],bi=V.data,a5=bi.nowData,bn=a5.propList||[],aS=typeof(a5.saleId)!="undefined"?a5.saleId:0,aG=typeof(a5.salePromotion)!="undefined"?a5.salePromotion:[],aZ="g_stress mallPriceBig f-mallPriceWrap",aY="g_minor mallMarketPrice f-mallPriceWrap",aC="",bg="",ay=false,aB=false,a7=false,bc="",at="",aP,aH,bo,a1,a4,aI,bf,aK,aL;F=((R<100&&R>1)||(a5.actualPrice!=a5.mallPrice));if(v){if("actualPrice" in a5){b=a5.actualPrice}if("discount" in a5){R=a5.discount}else{R=100}F=((R<100&&R>1)||(a5.actualPrice!=a5.mallPrice));y=a5.indepPrice?true:false}if(aG!=null||aG!=[]){ay=true;aB=T(bn);if(aB==true){a7=Q(aG,false);if(a7){F=false;aJ.push('<div class="fk-saleTime J_saleProTimeCount J_saleRemove">');aJ.push("<table>");aJ.push("<tr>");aJ.push("<td>");aJ.push('<div class="showSaleTimeImg fk-showSaleTimeImg">');aJ.push("</div>");aJ.push("</td>");aJ.push('<td class="J_showSaleTimeClass fk-showSaleTimeStyle">');aJ.push("</td>");aJ.push("</tr>");aJ.push("</table>");aJ.push("</div>")}}}if(typeof(a5.salePromotion)!="undefined"){F=false}aP=a5.name;aK=bn.length;for(bf=0;bf<aK;bf++){aL=bn[bf];aH=aL.name;bo=aL.type;a1=aL.fileId;a4=aL.value||"";if(L.trim(a4).length<1){continue}if(bo==11&&F){aC=aY;bg=aZ}else{if(bo==11&&!F){aC=aZ}else{if(bo==12){aC=aY}else{aC=""}}}if(bo==11&&F){bc="";at="J_mallPriceClass"}else{if(bo==11&&!F){bc="J_mallPriceClass"}else{bc=""}}aJ.push('<div class="f-propContent '+bc+'">');aJ.push('<div class="f-propName" title="'+aH+'" style="width:'+j+'px">'+aH+'<span class="f-colon">:</span></div>');aJ.push('<div class="f-propValue '+aC+'">');if(bo==11){aJ.push('	<span class="f-currencyVal">'+aq.choiceCurrencyVal+"</span>");if(F){aJ.push('	<span class="mallPrice J_realMallAmount">'+(Z?a4:Fai.formatPriceEn(a4))+"</span>");aJ.push("	</div>");aJ.push("</div>");aJ.push('<div class="f-propContent '+at+'">');aJ.push('<div class="f-propName" title="'+aH+'" style="width:'+j+'px">'+t+'<span class="f-colon">:</span></div>');aJ.push('<div class="f-propValue '+bg+'">');aJ.push('<span class="f-currencyVal">'+aq.choiceCurrencyVal+"</span>");var bk="";if(a4.indexOf("~")>=0){if(y){bk=b}else{var aw=a4.split("~");var bj=parseFloat(aw[0])*R*0.01,aA=parseFloat(aw[1])*R*0.01;bk=bj.toFixed(2)+"~"+aA.toFixed(2)}}else{bk=b;bk=parseFloat(bk).toFixed(2)}aJ.push('<span class="f-mallPrice mallPrice" id="realMallAmount">'+(Z?bk:Fai.formatPriceEn(bk))+"</span>");aJ.push('<span class="fk-mallBuy-big memberPrice">'+(Z?k:Fai.formatPriceEn(k))+"</span>")}else{aJ.push('	<span class="mallPrice J_realMallAmount" id="realMallAmount">'+(Z?a4:Fai.formatPriceEn(a4))+"</span>")}}else{if(bo==12){aJ.push('<span class="f-currencyVal">'+aq.choiceCurrencyVal+"</span>");aJ.push('<span class="mallPrice">'+(Z?a4:Fai.formatPriceEn(a4))+"</span>")}else{if(bo==13){aJ.push('<span id="mallAmount">'+a4+"</span>")}else{if(bo==16){aJ.push('<span id="mallWeight">'+a4+"</span>"+aq.weightType)}else{aJ.push(a4)}}}}aJ.push("</div>");aJ.push("</div>")}if(aq.mallOpen){if(aq.mallShoppingOptions){if("showOptionList" in a5){var aO=a5.showOptionList||[],bb=a5.oldOptionsStr,aK=aO.length,aF=a5.optionsAmountList||[];if(F){L.each(aF,function(bp,bq){if(y){bq.oPrice=b}else{bq.oPrice=bq.oPrice*R*0.01}})}for(var bf=0;bf<aK;bf++){var av=aO[bf],a3=av.items,bl=av.fieldKey,aV=0;if(bb){var aT=bb.split("_");for(var be=0;be<aT.length;be++){if(bl==aT[be]){aV=be}}}var au=a3.length;if(au>0){aJ.push('<div class="f-propContent f-optionContent">');aJ.push('<div class="f-propName" title="" style="width:'+j+'px">'+Fai.encodeHtml(av.name)+'<span class="f-colon">:</span></div>');aJ.push('<div class="propName" style="display:none;">'+Fai.encodeHtml(av.name)+"</div>");aJ.push('<div class="f-optionValue" style="width:'+(318-j)+'px">');aJ.push('<ul class="optionItemWrap" data="'+av.fieldKey+'" type="'+av.type+'">');for(var be=0;be<au;be++){var aM=a3[be];var aE=aM.i,a2=aM.v,bm=aM.path,aX=false;if(aF){for(var bd=0;bd<aF.length;bd++){var a0=aF[bd];var aU=a0.t2;var a9;if("flag" in a0){a9=a0.flag}else{a9=1}var ba=aU.split("_");if(a9==1&&aV<ba.length&&ba[aV]==aE){aX=true;break}}}if(aX){aJ.push('<li class="optionItem">');if(bm){aJ.push('<span class="img-n">'+Fai.encodeHtml(a2)+"</span>");var a6=aM.orgPic;if(a6){aJ.push('<img class="i-img J-item J-item-img" src="'+bm+'" data="'+aE+'" _fk-org="'+a6+'" faiWidth="'+aM.faiWidth+'" faiHeight="'+aM.faiHeight+'"/>')}else{aJ.push('<img class="i-img J-item J-item-img" src="'+bm+'" data="'+aE+'"/>')}}else{aJ.push('<a class="J-item oItem" href="javascript:;" hidefocus="true" data="'+Fai.encodeHtmlAttr(aE)+'">');aJ.push("<span>"+Fai.encodeHtml(a2)+"</span>");aJ.push("</a>")}aJ.push('</li">')}}aJ.push("</ul>");aJ.push("</div>");aJ.push("</div>")}}}}if(!am.hiddenBuybtn){var az=1;var aW="";var a8="";if(a5.limitAmount_mall){var ax=0;var aD=a5.productRestrictInfo;if(aD){if(aD.count){ax=aD.count}}var aN=0,aQ=a5.minAmount,bh=a5.maxAmount;aN=bh-ax;if(Fai.fkEval(aN)<0){aN=-1}if(aQ>1&&bh!=0){a8="( "+LS.minAmount+" : "+aQ+" ; "+LS.maxAmount+" : "+aN+" )";aW=' _min="'+aQ+'" _max="'+aN+'" '}else{if(aQ==1&&bh!=0){a8="("+LS.maxAmount+" : "+aN+" )";aW='" _max="'+aN+'" '}else{if(aQ>1&&bh==0){a8="( "+LS.minAmount+" : "+aQ+")";aW=' _min="'+aQ+'" '}}}az=aQ}aJ.push('<div class="f-propContent f-countContent">');aJ.push('<div class="f-propName" title="" style="width:'+j+'px">'+LS.amountNum+'<span class="f-colon">:</span></div>');aJ.push('<div class="f-propValue f-countValue" style="width:'+(318-j)+'px">');aJ.push('<input id="cartbuyCountPdSlide" type="text" class="f-cartCountInput" onkeypress="javascript:return Fai.isNumberKey(event);" onchange="Site.mallBuyCountChange(\'PdSlide\')" value="'+az+'" '+aW+"/>");aJ.push('<div class="f-buyCountBtn">');aJ.push('<span id="buyCountDesPdSlide" class="f-countBtn mallJia disableMallJian" onclick="Site.desMallBuyCount(\'PdSlide\')"></span>');aJ.push('<span id="buyCountIncPdSlide" class="f-countBtn mallJian" onclick="Site.incMallBuyCount(\'PdSlide\')"></span>');aJ.push("</div>");aJ.push('<span id="limitAmountDiv" class="f-limitAmountDiv" title="'+a8+'">');aJ.push(a8);aJ.push("</span>");aJ.push("</div>");aJ.push("</div>")}}aR.push('<div class="f-productNameContent">');aR.push('	<p class="f-productName">');if(am.titleClick){aI=V.data.nowData.productUrl;aR.push('<a class="f-productTitle" href="'+aI+'" target="_blank">');aR.push(aP);aR.push("</a>")}else{aR.push(aP)}aR.push("	</p>");aR.push("</div>");aR.push('<div class="f-underlineContent">');aR.push('<div class="f-underline"></div>');aR.push("</div>");aR.push('<div class="f-propListContent">');aR.push(aJ.join(""));aR.push("</div>");return aR.join("")}function T(au){var at=false,av;if(au==null){return at}len=au.length;for(i=0;i<len;i++){av=au[i];type=av.type;value=av.value||"";if(L.trim(value).length<1){continue}if(type==11){at=true;break}}return at}function af(){if(!aq.mallOpen&&!aq.bookingOpen){return}if(am.hiddenBuybtn){return}var aw=[],au=V.dom,aA=aq.addCartText||"",aB=aq.buyNowText||"",ax=aq.addCartClickEvent||"",av=aq.buyNowClickEvent||"",ay=aq.bookingClicEvent||"";if(aq.mallOpen){aw.push('<div class="f-buyContent">');aw.push('	<a href="javascript:;" onclick="'+ax+'" hidefocus="true" class="fk-mall-addCart f-addCart"><span>'+aA+"</span></a>");aw.push('	<a href="javascript:;" onclick="'+av+'" hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img">&nbsp;</span><span>'+aB+"</span></a>");aw.push("</div>")}else{if(aq.bookingOpen){var at=aq.bookingInfo;var az="onclick=\"jzUtils.run({'name':'bookingSubmitPanel.init', 'prompt':'true'}, '{&quot;panelHeight&quot;:"+at.panelHeight+", &quot;panelWidth&quot;:"+at.panelWidth+", &quot;pid&quot;:"+Site.productSlide.data.id+"}');\"";aw.push('<div class="f-buyContent">');aw.push('	<a href="javascript:;" '+az+' hidefocus="true" class="fk-mallBuy-big f-buyNow"><span class="bug-img fk-bookingIcon">&nbsp;</span><span>'+at.bookingNameStr+"</span></a>");aw.push("</div>")}}return aw.join("")}function D(at){at.push('<div class="f-albumsWrap J_albumsWrap">');at.push("</div>");at.push('<a href="javascript:;" onclick="return false;" class="f-albumsLeft J_albumsLeft" hidefocus="true">向左</a>');at.push('<a href="javascript:;" onclick="return false;" class="f-albumsRight J_albumsRight" hidefocus="true">向右</a>')}function H(){var ax=V.dom,az=V.data;ax.productDetailContent.empty();ax.productDetailContent.append(U());ax.productBuyContent.empty();ax.productBuyContent.append(af());var at=V.data.nowData;if(at){var aC=at.optionsAmountList,aw=at.relateAmount,aD=at.mallPrice,aB=at.productRestrictInfo,au=at.limitAmount_options,aF=at.oldOptionsStr,av=at.newOptionsStr,aE=at.limitAmount_mall,aA=at.minAmount,ay=at.maxAmount;Site.initProductRestrict("PdSlide",aE,aA,ay,aB);if(aq.mallShoppingOptions&&typeof(aC)!="undefined"){if(!aF){aF="null"}var aG=at.salePromotion;if(typeof(aG)!="undefined"){Site.salePromotionDetail.salePromotionParam=aG}Site.initProductOptions("PdSlide",aC,aw,aD,au,aB);Site.initOptionsStr(aF)}}if(Fai.top._manageMode){r()}}function ar(){var au=V.dom,at=V.data;nowData=at.nowData,multiContentRight=au.multiContentRight,propList=nowData.propList||[],saleId=typeof(nowData.saleId)!="undefined"?nowData.saleId:0,salePromotion=typeof(nowData.salePromotion)!="undefined"?nowData.salePromotion:[],showSaleCountDownFlag=false,beginTime="",endTime="";aq.saleShowType=1;if(salePromotion!=null&&salePromotion!=[]){showSaleMsg=true;findPriceFlag=T(propList);if(findPriceFlag==true){showSaleCountDownFlag=Q(salePromotion,true);if(!showSaleCountDownFlag){multiContentRight.find(".J_saleProTimeCount").remove();beginTime=salePromotion.beginTime;endTime=salePromotion.endTime;if(beginTime==null||beginTime==""||endTime==null||endTime==""){Y(salePromotion)}}}}}function E(aI,aN,au,ax){var ay=[],aM=V.dom,aG=aM.multiContentRight,aF="",aO=LS.salePromotionBegin,aE=LS.salePromotionEnd,aA=0,aC="g_stress mallPriceBig",aK="g_minor mallMarketPrice",av,aL,aw,az,aB,aH,aD,at,aJ;if(au==1){aF=aO;aA=aI}else{aF=aE;aA=aN}if(au=="2"){Y(ax)}clearInterval(aq.saleCountTimeInterval);aq.saleCountTimeInterval=setInterval(function(){av=parseInt(aA/(3600*24));aL=parseInt(aA/3600)-(av*24);aw=parseInt(aA/60)-(av*24*60)-(aL*60);az=parseInt(aA%60);aA--;aB=Fai.format(aF,av,aL,aw,az);aG.find(".J_showSaleTimeClass").html("&nbsp;&nbsp;"+aB);if(aA<0){if(au==1){aA=aN;aF=aE;au=2;Y(ax)}else{clearInterval(aq.saleCountTimeInterval);aG.find(".J_saleRemove").remove();if(ax.other.ruleData.s=="1"){aG.find(".J_newMallPriceClass").find(".f-propValue").addClass(aC);aG.find(".J_newMallPriceClass").find(".f-propValue").removeClass(aK);aG.find(".J_newMallPriceClass").find(".mallPrice").addClass("f-mallPrice")}}}},1000)}function Q(az,ax){var au=false,at=az.beginTime,av=az.endTime,ay=new Date().getTime()+aq.timeDiff,aw,aA;if(typeof(at)=="undefined"||at==null||at==""||typeof(av)=="undefined"||av==null||av==""){return au}aw=new Date(at.replace(/-/g,"/")).getTime();aA=new Date(av.replace(/-/g,"/")).getTime();if(aw>ay||aA>ay){au=true}if(ax){if(aw>ay){E(parseInt((aw-ay)/1000),parseInt((aA-aw)/1000),1,az)}else{if(aA>ay){E(parseInt((aw-ay)/1000),parseInt((aA-ay)/1000),2,az)}}}return au}function Y(aA){if(aq.saleShowType!="1"){return}aq.saleShowType=2;var aB=[],au=[],aL=V.dom,aJ=aL.multiContentRight,aM="g_stress mallPriceBig f-mallPriceWrap",ax="g_minor mallMarketPrice f-mallPriceWrap",aE,aF,aC,ay,at,aG,aN=[],aw,aI="";if(typeof(aA)=="undefined"||aA==null||aA==""){return}var aH=aJ.find(".J_mallPriceClass").find(".f-mallPrice").css("color");if(typeof(aH)=="undefined"||aH==null||aH==""){aH="#cf0000"}if(aA.saleType=="1"){ay="";at=parseFloat(aA.other.ruleData.d[0].m);aG=L(".J_mallPriceClass").find(".f-propName").attr("title");var aD=L(".J_mallPriceClass").find(".mallPrice").html();if(aD.indexOf("~")>0){var az=aD.split("~");var av=parseFloat(az[0]);if(isNaN(av)){av=0}aN.push(av);av=parseFloat(az[1]);if(isNaN(av)){av=0}aN.push(av)}else{var av=parseFloat(aD);if(isNaN(av)){av=0}aN.push(av)}for(var aK=0;aK<aN.length;aK++){aw=0;if(aA.other.ruleData.s=="1"){if(Fai.top._lcid==2052||Fai.top._lcid==1028){ay=Fai.format(LS.salePromotionDisCount,at)}else{ay=Fai.format(LS.salePromotionDisCount,Fai.formatPriceEn(10*(10-at),null,true))}aw=aN[aK]*(at/10)}else{if(Fai.top._lcid==2052||Fai.top._lcid==1028){ay=Fai.format(LS.salePromotionLapse,at)}else{ay=Fai.format(LS.salePromotionLapse,Fai.formatPriceEn(at,null,true))}aw=aN[aK]-at}if(isNaN(aw)||aw<0){aw=0}if(aK>0){aI+="~"}aI+=aw.toFixed(2)+""}L(".J_mallPriceClass").find(".f-propValue").addClass("fk-saleRelative");au.push('<div class="f-propContent J_newMallPriceClass">');au.push('<div class="f-propName" title="'+aG+'" style="width:'+j+'px">'+aG+'<span class="f-colon">:</span></div>');au.push('<div class="f-propValue '+ax+'">');au.push('<span class="f-currencyVal">'+aq.choiceCurrencyVal+"</span>");au.push('<span class="mallPrice">'+aD+"</span>");au.push("</div>");au.push("</div>");L(".J_mallPriceClass").before(au.join(""));L(".J_mallPriceClass").find(".f-propName").html(LS.promotionPrice+"<span class='f-colon'>:</span>");L(".J_mallPriceClass").find(".mallPrice").html(aI);L(".J_mallPriceClass").find(".f-propName").attr("title",LS.promotionPrice);L(".J_mallPriceClass").addClass("J_saleRemove");aB.push('<span class="fk-saleTopSet fk-saleAbsolute"><table border="0" cellspacing="0" cellpadding="0"><tr>');aB.push('<td class="fk-saleTdSty1">');aB.push('<div  class="f-trangle " style="border-bottom: 5px solid '+aH+';">');aB.push("</div>");aB.push("</td>");aB.push('<td class="fk-saleTdSty2">');aB.push('<div class="f-rect" style="background-color:'+aH+';"  title="'+aA.name+'">');aB.push(ay);aB.push("</div>");aB.push("</td>");aB.push("</tr></table></span>");L(".J_mallPriceClass").find(".f-propValue").append(aB.join(""))}else{aE=aA.other.ruleData.d.length;aF=aE*20+(aE-1)*12+"px";aB.push('<div class="f-propContent J_saleRemove">');aB.push('<div class="f-propName" title="'+LS.salePromotionName+'" style="height:'+aF+";width:"+j+'px">'+LS.salePromotionName+'<span class="f-colon">:</span></div>');aB.push('<div class="f-propValue fk-saleRelative" style="height:'+aF+'">');aB.push('<span class="saleHoverDefault fk-saleAbsolute" title="'+aA.name+'">');for(var aK=0;aK<aE;aK++){if(aK!=0){aC="top:"+(aK*30)+"px"}else{aC="top:0"}aB.push('<span class="fk-saleAbsolute" style="'+aC+'">');aB.push('<span class="saleFullReBg" style="margin:0;background-color:'+aH+';">');aB.push(Fai.format(LS.salePromotionOnlyFullReduce));aB.push("</span>");aB.push('<span style="margin:0;color:'+aH+'">');if(Z){aB.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,aA.other.ruleData.d[aK].m,aA.other.ruleData.d[aK].n))}else{aB.push("&nbsp;&nbsp;&nbsp;"+Fai.format(LS.salePromotionFullReduce,Fai.formatPriceEn(aA.other.ruleData.d[aK].m,null,true),Fai.formatPriceEn(aA.other.ruleData.d[aK].n,null,true)))}aB.push("</span>");aB.push("</span>")}aB.push("</span>");aB.push("	</div>");aB.push("</div>");aJ.find(".J_mallPriceClass").after(aB.join(""))}Site.showSalePromotionDl();if(Fai.top._manageMode){r()}}function w(av){var aw=V.data,au={src:"",width:-1,height:-1},at={};L.extend(at,au,av);O(at)}function ah(){var aw=V.data,av=aw.nowData,ax,au,at;if(av){ax=av.picPath;au=av.picwidth;at=av.picHeight;w({src:ax,width:au,height:at})}}function O(ay){var aw=V.dom,au=aw.productImg,at=ay.src||"",aA=390,aB=390,ax=new Image(),az=au.find(".J_nowImg"),av,aC;if(L.trim(at).length<1){Fai.ing("找不到该图片",true)}if(az.length>0){if(az.attr("src")==L.trim(at)){return}}au.empty().append('<div class="f-productImgLoading"></div>');if(W&&W.onload){W.onload=function(){}}ax.onload=function(){var aI=false,aH=false,aE="",aG=[],aF=[],aD,aJ;av=ax.width;aD=av;aC=ax.height;aJ=aC;if(av>=aC&&av>aA){aI=true;aD=aA}else{if(aC>aB){aH=true;aJ=aB}}if(aI){aE+="width:"+aD+"px;"}if(aH){aE+="height:"+aJ+"px;"}if(aI&&!aH){aJ=aA*ax.height/ax.width}if(!aI&&aH){aD=aB*ax.width/ax.height}if(!am.picZoom&&!am.picPopupPD){aF.push('	<a class="f-imgClick" href="'+(V.data.nowData.productUrl)+'" target="_blank" title="'+LS.toProductDetail+'">');aF.push('		<img class="J_nowImg " src="'+at+'" style="'+aE+'" />');aF.push("	</a>")}else{aF.push('	<img class="J_nowImg " src="'+at+'" style="'+aE+'" />')}aG.push('<table cellpadding="0" cellspacing="0" class="f-imgContainer">');aG.push("	<tr>");aG.push("		<td>");aG.push(aF.join(""));aG.push("		</td>");aG.push("	</tr>");aG.push("</table>");if(am.picZoom){aF=[];aF.push(aG.join(""));aG=[];aG.push('<div class="cloud-zoom f-imgWrap" href="'+at+'">');aG.push(aF.join(""));aG.push("</div>")}au.empty();au.append(aG.join(""));if(am.picZoom){az=au.find(".cloud-zoom");az.attr("rel","adjustX:-4, adjustY:-4, maxWidth:"+aA+", maxHeight:"+aB+',position:"inside"');az.CloudZoom({imageHeight:aC,imageWidth:av});if(!am.picPopupPD){setTimeout(function(){au.find(".mousetrap").append('<a href="'+(V.data.nowData.productUrl)+'" target="_blank" hidefocus="true" class="f-popupImgA" title="点击查看产品详情"></a>')},30)}}};W=ax;setTimeout(function(){ax.src=at},50)}function d(av){var aA=[],aB=[],aE=68,aC=0,az=V.data,av=az.id,aG=false,aH="",aF="",au=0,ax=0,at,aw,ay,aD;aD=z.length;for(ay=0;ay<aD;ay++){if(z[ay].id==av){at=z[ay];aG=true;break}}if(!aG){return""}aw=at.picPathList||[];aD=aw.length;for(ay=0;ay<aD;ay++){aH=aw[ay].thumbPath;aF=aw[ay].path;au=aw[ay].picWidth;ax=aw[ay].picHeight;aB.push("<li>");aB.push('	<a href="javascript:;" class="J_pic" onclick="return false;" path="'+aF+'" picwidth="'+au+'" picheight="'+ax+'" >');aB.push('		<img src="'+aH+'" style="display: block; width:60px; height:60px;" />');aB.push("	</a>");aB.push("</li>");aC+=aE}aA.push('			<div class="f-imgListOuter J_imgListOuter">');aA.push('				<ul class="f-imgList J_imgList" style="width:'+aC+'px;" _num="0">');aA.push(aB.join(""));aA.push("				</ul>");aA.push("			</div>");return aA.join("")}function a(){var av=V.dom,au=V.data,at=av.groupBtn;at.left.removeClass("f-BtnDisabled f-BtnEnabled");at.right.removeClass("f-BtnDisabled f-BtnEnabled");av.imgListWrap.empty();av.imgListWrap.append(d(au.id));av.imgListOuter=av.imgListWrap.find(".J_imgListOuter");av.imgList=av.imgListWrap.find(".J_imgList");av.imgList.find(".J_pic").hover(function(){w({src:L(this).attr("path"),width:L(this).attr("picwidth"),height:L(this).attr("picheight")})})}function x(){var ax=[],ay=[],at=90,aB=0,av,aA,au;if(z&&z.length>0){for(var aw=0,az=z.length;aw<az;aw++){av=z[aw];aA=av.picThumbPath||"";au=av.id;ay.push("<li>");ay.push('	<div class="f-albumsImgWrap J_albumsImgWrap J_albumsImgWrap'+au+'">');ay.push('		<a href="javascript:;" onclick="return false;" class="f-albumsImg J_albumsImg J_albumsImg'+au+'" _id="'+au+'">');ay.push('			<img src="'+aA+'" class="f_albums_image" />');ay.push("		</a>");ay.push('		<div class="f-albumsImgTip"></div>');ay.push("	</div>");ay.push("</li>");aB+=at}ax.push('<div class="f-albumsOuter J_albumsOuter">');ax.push('	<ul class="f-albums J_albums" style="width:'+aB+'px;" _num="0">');ax.push(ay.join(""));ax.push("	</ul>");ax.push("</div>")}return ax.join("")}function o(){var au=V.dom,at;au.albumsWrap.empty();au.albumsWrap.append(x());au.albumsOuter=au.albumsWrap.find(".J_albumsOuter");au.albums=au.albumsWrap.find(".J_albums");au.albumsImgWrap=au.albums.find(".J_albumsImgWrap");at=au.albums.children().first().outerWidth()||90,au.albums.find(".J_albumsImg").click(function(){var aw=L(this).attr("_id"),av=e(aw);g(aw)});C({index:M,visibleNum:2});ao()}function q(){var au=V.dom,at=V.data;au.albumsImgWrap.removeClass("f-albumsImgWrap-selected");au.albumsImgWrap.filter(".J_albumsImgWrap"+at.id).addClass("f-albumsImgWrap-selected")}function S(au){var at=V.dom,ax=at.albums,aB=at.albumsOuter,av=at.albumsBtn,aw=0,ay={content:ax,contentOuter:aB,button:av,scrollRow:true,visibleNum:2},aA={},az=au.changeProduct||false;L.extend(aA,ay,au);if(aA.scrollRow){B(aA)}else{aw=ap(aA);C({index:aw,visibleNum:2});A(aw)}ac(aA);L("#fk-productSlidePanel").find(".optionMsg").hide()}function aj(ax){var az=V.dom,ay=az.imgList,at=az.imgListOuter,aw=az.groupBtn,av={content:ay,contentOuter:at,button:aw,scrollRow:true},au={};L.extend(au,av,ax);B(au);ac(au)}function B(ax){var aB=ax.content,au=aB.children(),az=au.length,aA=au.first().outerWidth(),ay=ax.contentOuter.width(),aF=parseInt(ay/aA),aE=ax.visibleNum||0,aD=aF-aE,av=parseInt((az-aE)/aD),at=parseInt(aB.attr("_num"))||0,aw=0,aC=ax.direction;if(az<=aF){av=0}else{if((av*aD-az)>=0){av-=1}}if(aC){aw=at+1;if(aw>av){aw=0;aB.stop(true).animate({left:"0"});aB.attr("_num",aw)}else{aB.stop(true).animate({left:-(aw*aD*aA)+"px"});aB.attr("_num",aw)}}else{aw=at-1;if(aw<0){aw=av}aB.stop(true).animate({left:-(aw*aD*aA)+"px"});aB.attr("_num",aw)}}function C(ay){var av=V.dom,aD=av.albums,au=aD.children(),aB=au.length,aC=au.first().outerWidth(),az=av.albumsOuter.width(),aH=parseInt(az/aC),aG=ay.visibleNum||0,aF=aH-aG,aw=0,at=parseInt(aD.attr("_num"))||0,ax=0,aE=0,aA=ay.index;if(aG>parseInt(aH/2)){aG=parseInt(aH/2);aF=aH-aG}if(aB>aH&&aA>=aF){aw=parseInt((aB-aG)/aF);if((aw*aF-aB)>=0){aw-=1}ax=parseInt((aA-aG)/aF);aE=parseInt(aA/aF)}else{aw=0;ax=0;aE=0}if(ax>aw){ax=0}else{if(ax<0){ax=aw}}if(at==ax||at==aE){return}aD.stop(true).animate({left:-(ax*aF*aC)+"px"});aD.attr("_num",ax)}function ap(az){var aD=az.content,av=aD.children(),aB=av.length,aC=av.first().outerWidth(),aA=az.contentOuter.width(),au=0,at=M,aE=az.direction,aG=0,aF=1,ax=az.cycle||false,aw,ay;aw=aB-(aB%aF);if(aE){ay=at+aF;if(ay<aw){aG=ay}else{if(at>aw){aG=0}else{if(aw==aB){aG=aw-1;if(ax){aG=0}return aG}if(aw==at){aG=aw;return aG}aG=aw}}}else{ay=at-aF;if(ay>au){aG=ay}else{if(at<au){aG=0}else{aG=au;if(au==at){if(ax){aG=aB-1}return aG}}}}return aG}function ac(ax){var aC=ax.content,au=aC.children(),aA=au.length,aB=au.first().outerWidth(),ay=ax.contentOuter.width(),az=ax.button,aF=parseInt(ay/aB),aE=ax.visibleNum||0,aD=aF-aE,av=parseInt((aA-aE)/aD),at=parseInt(aC.attr("_num"))||0,aw=0;if(aA<=aF){av=0}else{if((av*aD-aA)>=0){av-=1}}aw=at+1;if(aw>av){aw=0;az.right.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{az.right.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}aw=at-1;if(aw<0){az.left.addClass("f-BtnDisabled").removeClass("f-BtnEnabled")}else{az.left.addClass("f-BtnEnabled").removeClass("f-BtnDisabled")}}function ao(){var az=V.dom,ay=az.albums,at=az.albumsOuter,ax=az.albumsBtn,aw=0,av={content:ay,contentOuter:at,button:ax,scrollRow:true},au={};L.extend(au,av,{scrollRow:true});ac(au)}function ai(){var ay=V.dom,ax=ay.imgList,at=ay.imgListOuter,aw=ay.groupBtn,av={content:ax,contentOuter:at,button:aw,scrollRow:true},au={};L.extend(au,av,{scrollRow:true});ac(au)}function al(av){var aw=[],au,at;aw.push(av.qsUrl);aw.push("&cmd=list");L.ajax({type:"get",cache:false,url:Site.genAjaxUrl("productSlide_h.jsp")+aw.join(""),error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(az){var ax=L.parseJSON(az),ay=V.data;if(ax.success){z=ax.list;am=ax.setInfo;aq=ax.data;ad=aq.css;R=aq.levelDiscount;t=aq.memberPrice;v=aq.proIndepDisc;k=aq.memberPriceLabel;j=am.prop2;if(Fai.top._manageMode){I=ax.itemList}if(z.length<1){Fai.ing("没有产品信息");return}au=new Date().getTime();at=aq.svrTimeLong;aq.timeDiff=at-au;aq.saleShowType=1;aq.saleCountTimeInterval="";if(aq.productId==-1){ay.id=z[0].id}else{ay.id=aq.productId}M=e(ay.id);if(M==-1){Fai.ing("没有该产品信息");return}else{ay.nowData=z[M]}s()}else{Fai.ing("获取数据失败",false)}}})}function n(){if(!am.shareShow){return}V.dom.shareContent.addClass("f-shareContentIniting");clearTimeout(m);m=setTimeout(function(){var at=[];at.push("cmd=share");at.push("&id="+V.data.id);at.push("&browserTitle="+Fai.top.document.title);L.ajax({type:"post",url:Site.genAjaxUrl("productSlide_h.jsp"),data:at.join(""),error:function(){Fai.ing("服务繁忙，请稍后重试",false)},success:function(aw){var av=L.parseJSON(aw),ax=V.dom,au="";if(av.success){au=av.content||""}else{Fai.ing("获取数据失败",false)}ax.shareContent.removeClass("f-shareContentIniting");ax.shareContent.empty().append(au)}})},300)}function e(aw){var au=-1,av,at;if(z&&z.length>0){at=z.length;for(av=0;av<at;av++){if(z[av].id==aw){au=av;break}}}return au}function A(at){if(M==at){return}if(z&&z[at]){g(z[at].id)}}function g(av){var at=-1,au=V.data;at=e(av);if(at==-1){Fai.ing("没有该产品信息");return}else{if(at==M){return}}M=at;au.id=parseInt(av);au.nowData=z[M];f()}function f(){V.dom.imgList=null;ah();H();ar();a();n();q();setTimeout(function(){ak()},50)}function P(au){var at=new Image();at.src=au}function ak(){var ax=V.data,aw=ax.nowData,av=aw.picPathList||[],au,at;at=av.length;for(au=0;au<at;au++){P(av[au].path)}}function an(){var at=V.dom;at.productDetailContent.empty();at.productBuyContent.empty();at.productImg.empty();at.imgListWrap.empty();at.albumsWrap.empty();at.shareContent.empty()}function X(){z=null;M=-1;W=null;m=null;aq=null;am=null;R=null;b=null;y=null;v=null;t=null;k=null;F=false;V.data={};j=82}function l(){var aw=V.dom,at=aw.panel,ay=aw.panelBtn,av=aw.groupBtn,au=aw.albumsBtn,ax;ay.close.click(function(){ab()});ay.left.click(function(){S({scrollRow:false,direction:false,cycle:true,changeProduct:true})});ay.right.click(function(){S({scrollRow:false,direction:true,cycle:true,changeProduct:true})});au.left.click(function(){S({scrollRow:true,direction:false})});au.right.click(function(){S({scrollRow:true,direction:true})});av.left.click(function(){aj({scrollRow:true,direction:false})});av.right.click(function(){aj({scrollRow:true,direction:true})});aw.contentBg.click(function(){ab()});aw.productPicContent.hover(function(){if(!aw.imgList){return}var az=aw.imgList.children();if(az&&az.length<2){return}ax=setTimeout(function(){aw.productImgGroup.slideDown("normal",function(){ai()})},250)},function(){clearTimeout(ax);aw.productImgGroup.slideUp()});aw.content.mouseleave(function(){clearTimeout(ax);aw.productImgGroup.slideUp()})}function c(){var at=V.dom;if(Fai.top.$(".J_popup_bg").length>1){at.contentBg.css("opacity",".15")}}function N(at){var au=V.dom;au.panel=Fai.top.$("#fk-productSlidePanel");au.content=au.panel.find(".J_content");au.contentBg=au.panel.find(".J_contentBg");au.panelBtn={};au.panelBtn.left=au.panel.find(".J_turnLeft");au.panelBtn.right=au.panel.find(".J_turnRight");au.panelBtn.close=au.panel.find(".J_close");au.multiContent=au.panel.find(".J_multiContent");au.albumsContent=au.panel.find(".J_albumsContent");au.multiContentLeft=au.multiContent.find(".J_multiContentLeft");au.multiContentRight=au.multiContent.find(".J_multiContentRight");au.productDetailContent=au.multiContentRight.find(".J_productDetailContent");au.productBuyContent=au.multiContentRight.find(".J_productBuyContent");au.shareContent=au.multiContentLeft.find(".J_shareContent");au.productPicContent=au.multiContentLeft.find(".J_productPicContent");au.productImg=au.multiContentLeft.find(".J_productImg");au.productImgGroup=au.multiContentLeft.find(".J_productImgGroup");au.imgListWrap=au.multiContentLeft.find(".J_imgListWrap");au.groupBtn={};au.groupBtn.left=au.multiContentLeft.find(".J_groupLeft");au.groupBtn.right=au.multiContentLeft.find(".J_groupRight");au.albumsWrap=au.albumsContent.find(".J_albumsWrap");au.albumsBtn={};au.albumsBtn.left=au.albumsContent.find(".J_albumsLeft");au.albumsBtn.right=au.albumsContent.find(".J_albumsRight");if(typeof at.eventFunc=="function"){setTimeout(function(){at.eventFunc.apply(V,arguments)},30)}if(typeof at.styleFunc=="function"){setTimeout(function(){at.styleFunc.apply(V,arguments)},30)}}function s(){ag({func:function(){var au=V.dom;if(au.panel&&au.panel.length>0){if(au.panel.is(":hidden")){au.panel.show()}}else{Fai.top.$("#fk-productSlidePanel").show()}ah();H();ar();a();o();n();q();setTimeout(function(){ak()},50)}});if(Fai.top._manageMode&&I&&I.length>0){var at=V.dom.content;at.off("mousemove.productSlide").on("mousemove.productSlide",function(){Site.addEditLayer("fk-productSlideContent",I,100,{extCls:"fk-productSlideEditLayer"})});at.off("mouseleave.productSlide").on("mouseleave.productSlide",function(){Site.removeEditLayer("fk-productSlideContent")})}}function ab(){var at=V.dom;if(Fai.top._manageMode&&I){Site.removeEditLayer("fk-productSlideContent")}at.panel&&at.panel.hide();X();V.dom={};h="";ad="";I=null;Fai.top.$("#fk-productSlidePanel").remove()}V.init=function(at){ab();Fai.top.$("body").append(G().join(""));h=at;al({qsUrl:at});N({eventFunc:l,styleFunc:c})};V.refresh=function(){an();X();al({qsUrl:h})};function ag(at){if(!Site.checkCssLoad(ad)&&L.trim(ad).length>0){Site.demandLoadCss(ad,function(){if(typeof at.func=="function"){at.func.apply(V,arguments)}})}else{if(typeof at.func=="function"){at.func.apply(V,arguments)}}}function r(){L(".f-propName").attr("class","f-propName paramResize");u();L(".f-propName,.u-paramResize-e,.u-paramResize-w").hover(function(){L(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"})},function(){L(".f-propName").css("border","1px dashed transparent")})}function u(){var at=L(".f-propListContent ").find(".f-propContent").find(".paramResize");if(at.length<1){return}at.each(function(){var aA=L(this),au=Fai.isIE8()?L(document):L(window),aC,az,aw=L(this),ay,ax={},aE;if(aA.hasClass("paramResize")){aA.before("<div class='u-paramResize-w' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+L(aA).outerHeight()+"px;z-index:999'></div></div>");aA.after("<div class='u-paramResize-e' style='float:left' title='可拖动调节宽度'><div style='width:5px;height:"+L(aA).outerHeight()+"px;z-index:999'></div></div>");L(".u-paramResize-e,.u-paramResize-w").css("cursor","e-resize")}aC=L(aA).prev();az=L(aA).next();if(!az.hasClass("u-paramResize-e")||!aC.hasClass("u-paramResize-w")){return}aC.off("mousedown.fi").on("mousedown.fi",aD);az.off("mousedown.fi").on("mousedown.fi",aD);function aD(aF){aF=aF||window.event;ax.x=aF.pageX;if(L(this).hasClass("u-paramResize-w")){ax.dir="w";ax.ptb=parseInt(aw.css("width"))}else{if(L(this).hasClass("u-paramResize-e")){ax.dir="e";ax.ptb=parseInt(aw.css("width"))}}ay=L("#dockTip").show().css({left:"-1000px;",top:"-1000px"});au.off("mousemove.fi").on("mousemove.fi",av);au.off("mouseup.fi").on("mouseup.fi",aB);aF.preventDefault()}function av(aI){L("body").css("cursor","e-resize");L(".f-propName").css({"border-left":"1px dashed #2b73ba","border-right":"1px dashed #2b73ba","border-top":"1px solid #2b73ba","border-bottom":"1px solid #2b73ba"});aI=aI||window.event;var aJ={x:aI.pageX},aG,aL,aF=1,aH=200,aK="";if(ax.dir=="w"){aG=ax.x-aJ.x;aL=ax.ptb+aG;aL=aL>aF?aL:aF;aL=aL>aH?aH:aL;aL=Math.round(aL);aK="宽度:"}else{if(ax.dir=="e"){aG=aJ.x-ax.x;aL=ax.ptb+aG;aL=aL>aF?aL:aF;aL=aL>aH?aH:aL;aL=Math.round(aL);aK="宽度:"}}aE=aL;L(".f-propName").css({width:aL+"px"});L(".f-optionValue").css({width:(318-aL)+"px"});L(".f-countValue").css({width:(318-aL)+"px"});ay.html(aK+aL).css({left:aI.pageX-28,top:aI.pageY-40});aI.preventDefault()}function aB(aG){L("body").css("cursor","");L(".f-propName").css("border","1px dashed transparent");aG=aG||window.event;ax.dir="";au.off("mousemove.fi");au.off("mouseup.fi");ay.hide();ax={};var aF=am.id;var aI="cmd=set&id="+aF+"&style=19&prop0=1&prop2="+aE;var aH=Site.genAjaxUrl("module_h.jsp");Fai.ing("正在保存……",false);L.ajax({type:"post",url:aH,data:aI,error:function(){Fai.ing("服务繁忙，请稍候重试",false)},success:function(aK){var aJ=L.parseJSON(aK);if(aJ.success){Fai.ing("修改宽度成功",true);j=aE}else{Fai.ing(aJ.msg,false);L(".J_productDetailContent").find(".f-propContent").find(".paramResize").css("width",j)}}});aG.preventDefault()}})}})(jQuery,Site.productSlide);