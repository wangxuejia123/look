(function(B,I,i){var P=navigator.userAgent.toLowerCase();function j(){if(window.getSelection){var Q=d();Q.removeAllRanges()}}function d(){if(window.getSelection){return window.getSelection()}else{if(document.selection&&document.selection.createRange&&document.selection.type!="None"){return document.selection.createRange()}}}function D(R,S){var Q,T=d();if(window.getSelection){if(T.anchorNode&&T.getRangeAt){Q=T.getRangeAt(0)}if(Q){T.removeAllRanges();T.addRange(Q)}if(!P.match(/msie/)){document.execCommand("StyleWithCSS",false,false)}try{document.execCommand(R,false,S)}catch(U){}}else{if(document.selection&&document.selection.createRange&&document.selection.type!="None"){Q=document.selection.createRange();Q.execCommand(R,false,S)}}p(false,true)}function p(R,S){var T=u();T=T?T:R;if(T&&S==false){if(T.parent().is("[style]")){T.attr("style",T.parent().attr("style"))}if(T.is("[style]")){T.find("*").attr("style",T.attr("style"))}}else{if(R&&S&&R.is("[style]")){var Q=S.split(";");Q=Q[0].split(":");if(Q[0]=="color"){var U=false;R.find("*").each(function(V,W){if(V==0&&B(this).attr("color")||B(this).parent().attr("color")){U=true}if(!B(this).attr("color")){if(!U){B(this).css(Q[0],Q[1])}}})}else{if(R.is("[style*="+Q[0]+"]")){R.find("*").css(Q[0],Q[1])}}l(R)}}}function l(R){if(R){var R=R[0];if(document.body.createTextRange){var Q=document.body.createTextRange();Q.moveToElementText(R);Q.select()}else{if(window.getSelection){var S=window.getSelection();var Q=document.createRange();if(R!="undefined"&&R!=null){Q.selectNodeContents(R);S.removeAllRanges();S.addRange(Q);if(B(R).is(":empty")){B(R).append("&nbsp;");l(B(R))}}}}}}var u=function(){var S,R;if(window.getSelection){R=getSelection();S=R.anchorNode}if(!S&&document.selection&&document.selection.createRange&&document.selection.type!="None"){R=document.selection;var Q=R.getRangeAt?R.getRangeAt(0):R.createRange();S=Q.commonAncestorContainer?Q.commonAncestorContainer:Q.parentElement?Q.parentElement():Q.item(0)}if(S){return(S.nodeName=="#text"?B(S.parentNode):B(S))}else{return false}};function o(U){try{if(window.getSelection){j();var Q=U.childNodes;if(Q&&Q.length>0){for(var S=0;S<Q.length;S++){var R=document.createRange();R.selectNode(Q[S]);d().addRange(R)}}else{var R=document.createRange();R.selectNode(U);d().addRange(R)}}}catch(T){}}function m(T){var S=u();if(S&&S.is("[style]")&&S.css(T)!=""){var Q=S.css(T);S.css(T,"");var R=S.attr("style");S.css(T,Q);return R}else{return""}}function q(V,U,R){if(typeof(V.parent())!="undefined"){var Q=V.parent();if(!Q.hasClass("fkEditor-wrap")){if(V.text().length==Q.text().length){Q.css(U,"");q(Q,U,R)}for(var T=0;T<Q.children().length;T++){var S=Q.children().eq(T);if(S.text().length<=0&&S.html().indexOf("br")<0&&S.html().indexOf("nbsp")<0){S.replaceWith("")}}}}}function c(U,T,Q){if(typeof(U.children)!="undefined"){for(var S=0;S<U.children().length;S++){var R=U.children().eq(S);R.css(T,"");c(R,T,Q)}}}function G(T,R,S,Q,U){if(T&&T.length>0){T.find("*").css(S,"");T.find(R).css(S,Q)}K(T,R,S,Q,U)}function K(V,S,U,R,W){if(typeof(V.parent())!="undefined"){var Q=V.parent();if(!Q.hasClass("fkEditor-wrap")&&B.trim(Q.text())==W){var T=Q[0].tagName.toLowerCase();if(T==S){Q.css(U,R)}else{Q.css(U,"")}K(Q,S,U,R,W)}}}function a(S,T){var V="";if(window.getSelection){var U=d(),Q;if(U.anchorNode&&U.getRangeAt){Q=U.getRangeAt(0);if(!S){T.data("range",Q)}V=Q.toString()}}else{if(document.selection&&document.selection.createRange&&document.selection.type!="None"){var R=document.selection.createRange();if(!S){T.data("range",R)}V=R.htmlText}}return B.trim(V)}function n(Q){if(window.getSelection&&Q!=null){var R=d();R.removeAllRanges();d().addRange(Q)}else{if(document.selection&&document.selection.createRange&&document.selection.type!="None"&&Q!=null){document.selection.createRangeCollection(Q)}}}function f(S,ab,Y,V,Z,aa,R,X,U,Q){var T=m(S);if(typeof(T)=="undefined"){T=""}if(typeof(R)=="undefined"||R==""){R="span"}var W={tTag:R,tAttr:"style",tVal:S+":"+ab+";"+T,styleName:S,styleValue:ab,ctrlEditor:Y,notCreateNewNode:V,attr2:Z,attr2Value:aa,createNewNodeAction:X,command:U};E(W)}var C=new Date().getTime();var O=new Date().getTime();function E(aa){var ad=aa.tTag,Z=aa.tAttr,ac=aa.tVal,W=aa.styleName,ab=aa.styleValue,Y=aa.ctrlEditor,af=aa.notCreateNewNode,S=aa.attr2,ag=aa.attr2Value,V=aa.command,aj="fk-c-";if(!Y){Y=editor}if(typeof(af)=="undefined"){af=false}if(window.getSelection){var R=new Date().getTime();if((R-O)<20){return}hasRefreshClick=Y.data("hasRefreshClick");signClassNum=Y.data("signClassNum");var ae=Y.find("."+aj+signClassNum);var T=B.trim(a(true,Y)).length;var ah=false;if(V=="setLinkColor"){ah=true}if(!ah&&!hasRefreshClick&&ae.length>0&&(T>0||af||(B.browser.msie&&B.browser.version=="9.0"))){ae.css(W,ab);if(typeof(S)!="undefined"&&S!=""){ae.attr(S,ag)}if(Y.data("hasRsChildStyle")<50){Y.data("hasRsChildStyle",parseInt(Y.data("hasRsChildStyle"))+1);if(W=="color"||S=="color"){ae.find("*").css(W,"").removeAttr("color")}else{ae.find("*").css(W,"")}if(Y.data("hasRsChildStyle")<10){q(ae,W,ab)}}e(V,ae,Y);return}O=R;Y.data("hasRefreshClick",false);Y.data("hasRsChildStyle",0);if(aa.createNewNodeAction==true){return}var X=d(),ai,U,Q;if(X.anchorNode&&X.getRangeAt){ai=X.getRangeAt(0);U=document.createElement(ad);if(ae.length>0){if(ae.html()=="&nbsp;"){ae.replaceWith("")}else{ae.removeClass(aj+signClassNum)}}signClassNum=parseInt(signClassNum)+1;Y.data("signClassNum",signClassNum);B(U).addClass(aj+signClassNum);Q=ai.extractContents();U.appendChild(Q);if(typeof(S)!="undefined"&&S!=""){B(U).attr(S,ag)}ai.insertNode(U);if(ah){if(B(U).parent().attr("color")){B(U).attr("style","")}else{B(U).attr("style","").css(W,ab)}}else{B(U).attr("style","").css(W,ab)}if(V!="Underline"){if(Z=="style"){p(B(U),ac)}else{p(B(U),true)}}e(V,B(U),Y)}}}function k(T,S){var R=false;if(typeof(T.parent())!="undefined"){var Q=T.parent();if(!Q.hasClass("fkEditor-wrap")){var U=Q[0].tagName.toLowerCase();if(U==S){return Q}else{return k(Q,S)}}}return R}function A(U,T){var R=false;if(typeof(U.children())!="undefined"&&U.children().length>0){var Q=U.children();for(var S=0;S<Q.length;S++){var V=Q.eq(S)}}return R}function h(Q){if(B("#fkEditor-"+Q).length>0&&B("#fkEditor-"+Q).hasClass("fk-editor-vertical-rl")){return}setTimeout(function(){I.top.Site.autoModuleHeight(Q)},800)}function e(S,U,aa){if(S=="Underline"){var ac=false,Q=false,V=false,Z=false,T=false,ab=B.trim(U.text());ac=k(U,"u");if(ac==false){Q=k(U,"a");if(Q!=false&&Q.css("text-decoration")!="none"){V=Q;Q=true}else{Q=false}if(Q==false){var Y=U.find("u");if(Y.length>0&&B.trim(Y.eq(0).text())==ab){Z=true}if(Z==false){var R=U.find("a");if(R.length>0&&B.trim(R.eq(0).text())==ab&&R.eq(0).css("text-decoration")!="none"){T=true}else{T=false}}}}D(S,null);if(ac!=false||Q!=false||Z!=false||T!=false){var X="none";if(Q==true&&B.trim(V.text())!=ab){V.find("*").css("text-decoration","");if(V.css("text-decoration")!="none"){V.css("text-decoration","none")}else{V.css("text-decoration","underline")}}else{G(U,"a","text-decoration",X,ab)}}else{var W=B("<u></u>");W.html(U.html());U.html(W.prop("outerHTML"));var X="underline";G(U,"a","text-decoration",X,ab)}o(U[0])}}function F(){var Q=d();if(!Q){return false}if("baseOffset" in Q&&Q.baseOffset==0){return false}return true}function t(Q){var S=false;if(typeof(Q)=="undefined"||Q=="null"||B.trim(Q).length<=0){return S}Q=B.trim(Q);Q=Q.toLowerCase();if(Q.indexOf(";")>0){Q=Q.split(";");Q=Q[0]}if(Q.indexOf("white")!=-1||Q.indexOf("#ffffff")!=-1){S=true}else{if(Q.indexOf("rgb")!=-1){if(Q.indexOf("(255, 255, 255)")!=-1){S=true}else{var R=Q.split(",");if(R.length>3&&(Q.indexOf(", 0)")!=-1||Q.indexOf(",0)")!=-1)){S=true}}}}return S}function v(S,T,V,R,U,Q){S.attr("href",T);S.attr("_ltype",V);S.attr("_lide",R);S.attr("_lname",U);S.attr("target",Q)}function r(T,X,V,S,Z,R,W){if((T.find("div").length>0||T.find("p").length>0)&&T.text().length>0){for(var U=0;U<T.children().length;U++){var Y=T.children().eq(U);if((Y.find("div").length>0||Y.find("p").length>0)&&Y.text().length>0){r(Y,X,V,S,Z,R,W)}else{if(Y.text().length>0){var Q=B(W).html(Y.html());Y.html(Q)}}}}}function J(ab,ah,ad){var aa=B("#"+ab.css+"-toolBar-"+ab.moduleId);var Y=aa.find("."+ab.css+"-formatBar");var Z=aa.find("."+ab.css+"-slideBar");var R=Z.find(".slideSlider");var al=aa.find("."+ab.css+"-lhSlideBar");var aj=al.find(".lhSlideSlider");var ac=aa.find(".tool-color ."+ab.css+"-tool-icon");var ak=ad.css+"-tool-depressed";var V='<div class="'+ak+'"></div>';for(var ae=0;ae<ah.length;ae++){if(ab[ah[ae].name]&&ah[ae].emphasis&&ah[ae].tag!=""){if(y(ah[ae].tag)){if(aa.find(".tool"+ah[ae].cls).find("."+ak).length<=0){aa.find(".tool"+ah[ae].cls).append(V)}}else{aa.find(".tool"+ah[ae].cls).find("."+ak).remove()}}if(ab[ah[ae].name]&&ah[ae].emphasis){if(ah[ae].name=="left"||ah[ae].name=="center"||ah[ae].name=="right"){var af=N("text-align");if(af.indexOf(ah[ae].name)>=0){if(aa.find(".tool-"+ah[ae].name).find("."+ak).length<=0){aa.find(".tool-"+ah[ae].name).append(V)}}else{aa.find(".tool-"+ah[ae].name).find("."+ak).remove()}}}if(ab[ah[ae].name]&&ah[ae].name=="color"){var Q=N("color");if(t(Q)){ac.css("border","solid 1px #ccc")}else{ac.css("border","0px")}ac.css("background",Q);ac.removeClass("fk-colorPicker-transparentIco")}if(ab[ah[ae].name]&&ah[ae].name=="format"){var ai=N("font-family"),W=ad.formats;if(W&&W.length>0){var U=false;for(var ag=0;ag<W.length;ag++){if(B.trim(W[ag][0]).indexOf(B.trim(ai))>=0){U=true;aa.find(".tool-family").find(".selectDiv span").attr("title",W[ag][1]).html(W[ag][1]);var X=Y.find("."+ab.css+"-formatContent");X.find(".formatDef").removeClass("formatDef");X.find("a").eq(ag).addClass("formatDef");break}}if(!U){aa.find(".tool-family").find(".selectDiv span").attr("title",ai).html(ai)}}}var T=N("font-size");if(ab[ah[ae].name]&&ah[ae].name=="fsize"){T=T.replace(ab.funit,"");if(T<=0){T=20}Z.find(".inputVal").html(T+ab.funit);aa.find(".tool-size").find(".selectDiv span").attr("title",T+ab.funit).html(T+ab.funit);aa.find(".tool-size").find(".toolSizeCoverDom").attr("title",T+ab.funit);T=T<=112?T:112;T=T<=ad.slideBar.beginValue?ad.slideBar.beginValue:T;R.css({left:(parseInt(T)-10)+ad.slideBar.per});Z.find(".slideFontBar").css("width",(parseInt(T)-ad.slideBar.beginValue)+ad.slideBar.per)}if(ab[ah[ae].name]&&ah[ae].name=="lineHeight"){var S=N("line-height");S=S.replace(ab.funit,"");if(isNaN(S)){S=T;S=S.replace(ab.funit,"")}if(S<=0){S=20}al.find(".inputVal").html(S+ab.funit);S=S<=112?S:112;S=S<=ad.slideBar.beginValue?ad.slideBar.beginValue:S;aj.css({left:(parseInt(S)-10)+ad.lhSlideBar.per});al.find(".lhSlideLhBar").css("width",(parseInt(S)-ad.lhSlideBar.beginValue)+ad.lhSlideBar.per)}}}function g(Q,X){var V=B("#"+X.css+"-toolBar-"+X.moduleId);var T=V.find("."+X.css+"-slideBar");var S=V.find("."+X.css+"-formatBar");var R=V.find("."+X.css+"-lhSlideBar");var U=R.find(".lhSlideSlider");var W=V.find(".textAlignPanel");if(Q!="formatbar"){S.find("*").slideUp(150);V.find(".format-tool-icon").removeClass("edTriangleOn")}if(Q!="fsizebar"){if(T.find("."+X.css+"-fontsizes").data("hover")!=true){T.find("*").slideUp(150);V.find(".fsize-tool-icon").removeClass("edTriangleOn")}}if(Q!="lhbar"){R.find("*").slideUp(150,function(){R.parent().find(".selectDiv").hide()})}if(Q!="textAlign"){W.slideUp(150,function(){W.hide();V.find(".tooltextAlignOn").hide()})}if(!X.isCommonModule){B(".J_faiColorPickerAlp").slideUp(150)}B(".J_faiColorPickerAlp").slideUp(150)}function y(S){var T=false,R=u(),Q;if(R){B.each(S,function(U,V){Q=R.prop("tagName").toLowerCase();if(Q==V){T=true}else{R.parents().each(function(){Q=B(this).prop("tagName").toLowerCase();if(Q==V){T=true}})}});return T}else{return false}}function N(R){var Q=u();if(Fai.isMozilla()&&Q.length>0&&Q.hasClass("fk-editor")&&Q.find(">*").length>0&&(R=="font-size"||R=="line-height")){$nodeStyleNode=Q.find("[style]");$nodeStyleNode.each(function(){var T=B(this).attr("style");var S;if(R=="font-size"){S=new RegExp("font-size","i")}else{if(R=="line-height"){S=new RegExp("line-height","i")}}if(T.match(S)){Q=B(this);return true}})}if(R&&Q){return Q.css(R)}else{return""}}function w(Y,Z){var X="",aa=false;var Q=Z.find("."+Y.css+"-lhSlideBar");var S=Q.find(".lhSlideSlider");var W=B("#"+Y.css+"-"+Y.moduleId);if(aa||!S){return}var V=document.attachEvent;var R=0,T=0;var U=false;if(V&&S[0]){S[0].attachEvent("onselectstart",function(){return false})}S.mousedown(function(ac){Site.logDog(200077,15);var ab=false;if(P.indexOf("se")>-1){ab=true}if(ab){n(W.data("range"))}var ac=ac||window.event;R=ac.clientX;T=S.css("left");if(T.indexOf(Y.lhSlideBar.per)>=0){T=T.replace(Y.lhSlideBar.per,"")}leftMin=Q.find(".lhSlideBar").css("left");if(leftMin.indexOf(Y.lhSlideBar.per)>=0){leftMin=leftMin.replace(Y.lhSlideBar.per,"")}leftMin=parseInt(leftMin)-parseInt(10);leftMax=parseInt(leftMin)+parseInt(Y.lhSlideBar.width);U=true;Fai.top.$(document).on("mousemove.fked",function(ah){var ah=ah||window.event;var ad=ah.clientX;var af;if(U){var ae=parseInt(ad)-parseInt(R)+parseInt(T);if(ae<=(leftMin-1)||ae>leftMax){return false}S.css({left:ae+Y.lhSlideBar.per});var ai=(parseInt(ae)-parseInt(leftMin)+parseInt(Y.lhSlideBar.beginValue))+Y.lhSlideBar.per;Q.find(".lhSlideLhBar").css("width",(parseInt(ae)-parseInt(leftMin)-Y.lhSlideBar.beginValue+parseInt(Y.lhSlideBar.beginValue))+Y.lhSlideBar.per);if(!Y.isCommonModule){f("line-height",ai,B("#"+Y.systemModule))}else{B(u()).css("line-height","").find("*").css("line-height","");var ag=B("#"+Y.css+"-"+Y.moduleId);f("line-height",ai,ag)}Q.find(".inputVal").html(ai)}Fai.top.$(document).one("mouseup.fked",function(){var aj=B("#"+Y.css+"-"+Y.moduleId);if(aj.find("*").length==1&&aj.find("*").is("span")&&aj.find("*")[0].style.lineHeight!=""){aj.html("<div>"+aj.html()+"</div>")}if(U){h(Y.moduleId)}U=false;Fai.top.$(document).off("mousemove.fked")});aa=true})})}var x={};x.simpleTextColorInputHexStatus=function(Q,U,aa,Z,Y){var X=B("#"+Y.css+"-"+Y.moduleId);if(Z.data("hasRefreshClick")){if(B.trim(a(true,X)).length<=0){Z.data("notCreateNewNode",false)}else{Z.data("notCreateNewNode",true)}}var T=Z.data("notCreateNewNode");if(typeof(T)=="undefined"){T=true}if(u()&&typeof u().hasClass=="function"&&u().hasClass("J_colorpicker_hex")){T=true}if(Q==1&&T){f("xxxx","",Z,false,"","","font");setTimeout(function(){f("xxxx","",Z,false,"","","font");j()},100)}else{if(Q==2){var S=Z.attr("id");var R=S.substring((S.indexOf("-")+1));var V=I.top.$("#fkEditor-toolBar-"+R).find(".tool-color ."+Y.css+"-tool-icon");var W=false;if(aa&&aa!=""){V.css("background",aa);W=t(aa)}else{V.css("background",U);W=t(U)}if(W){V.css("border","solid 1px #ccc")}else{V.css("border","0px")}if(aa&&aa!=""){f("color",aa,Z,T,"color",U)}else{f("color",U,Z,T,"color",U)}}}};var z=["div","span","font","p","u","i","br","b","a","strong","em"];var H=["font-size","line-height","text-align","color","font-family"];x.simpleTextFormatPasteData=function(R,Q){M(Q);s(Q)};function s(S){if(typeof(S.children)!="undefined"&&S.children().length>0){for(var R=0;R<S.children().length;R++){var Q=S.children().eq(R);if(typeof(Q.attr("style"))!="undefined"&&Q.attr("style").indexOf("text-align")!=-1&&Q.css("display")!="block"){Q.css("display","block")}s(Q)}}}function M(X){if(typeof(X.children)!="undefined"&&X.children().length>0){for(var Y=0;Y<X.children().length;Y++){var U=X.children().eq(Y);var S=B.trim(U.prop("tagName").toLowerCase());if(R(z,S)){var Q=U.attr("style");if(typeof(Q)!="undefined"&&Q.length>0){Q=Q.toLowerCase();var aa,W,Z,T,ac,ab=Q.split(";");if(ab.length>0){aa=false;W=[];for(var V=0;V<ab.length;V++){if(typeof(ab[V])!="undefined"){Z=ab[V].split(":");if(typeof(Z)!="undefined"&&Z.length==2){T=Z[0];if(T.indexOf(",")>0){T=T.substring(T.lastIndexOf(","))}ac=Z[1];T=B.trim(T);if(R(H,T)){if(T=="font-size"||T=="line-height"){if(ac.indexOf("px")<0){ab[V]=""}else{aa=true}}W.push(ab[V]+";")}else{aa=true}}else{aa=true}}else{aa=true}}if(aa){U.attr("style",W.join(""))}}}}else{U.prop("outerHTML",U.text())}M(U)}}function R(af,ae){for(var ad=0;ad<af.length;ad++){if(af[ad]==ae){return true}}return false}}B.fn.editTool=function(S){var V=[1,3];var Q={editContent:false,editPhoto:false,hoverPhoto:false,photoShape:false,editModule:false,opacity:false,border:false,shadow:false,link:true,openLinkPanel:false,style:false,describePic:false,fixedIcon:false,deleteModule:true,setRadius:false,animation:false,enableIcon:false,moduleName:false,color:true,b:false,i:false,u:false,format:false,fsize:false,left:false,center:false,right:false,lineHeight:false,moduleId:0,css:"fkEditor",cpName:"fk",funit:"px",sepIndex:V,opacityBar:{width:90,beginValue:0,per:"px"},slideBar:{width:100,beginValue:12,per:"px"},lhSlideBar:{width:100,beginValue:12,per:"px"},lineHeightName:"",editPicFun:"",hoverPicFun:"",picShapeFun:"",editModuleFun:"",setModuleStyle:"",pageChangeFun:"",deleteFun:"",jumpCtrlFun:"",saveJumpCtrlFun:"",changeLogoDesFunc:"",moduleNameFun:"",initFixedIcon:"",changeFixedIcon:"",saveGroupData:"",isCommonModule:"true",systemModule:""};var U=B.extend(Q,S);function R(X){var W="";if(X.isCommonModule){if(X.moduleId=="null"||X.moduleId==0){return}W=I.top.$("#module"+X.moduleId)}else{W=I.top.$("#"+X.systemModule);X.moduleId=X.systemModule}return W}var T=R(U);if(!(T&&T.length>0)){return}if(U.systemModule=="corpTitle"){Site["corpTitleFormatPasteData"+U.moduleId]=function(){setTimeout(function(){},20)}}return this.each(function(){var aa=navigator.userAgent.toLowerCase();var ax=aa.indexOf("se")>-1?true:false;var ab=Fai.top.$("#corpTitle");var ap;var au=false;T.bind("mouseover",function(ay){T.data("mouseover",true);clearTimeout(ap);Z()}).bind("mouseleave",function(ay){T.data("mouseover",false);if(!ak()){clearTimeout(ap);ap=setTimeout(ah,200)}}).bind("mousedown",function(ay){if(ay.button!=0){return}T.data("mousemove",false);T.data("mousedown",true);T.data("screenX",ay.screenX);T.data("screenY",ay.screenY);setTimeout(function(){g("",U);J(U,am(),U)},100)}).bind("mouseup",function(ay){T.data("hasRefreshClick",true)}).bind("keypress keyup keydown drop cut copy paste DOMCharacterDataModified DOMSubtreeModified",function(ay){B(this).trigger("change");if(T.data("floatBtn")){if(ay.which==13){return false}}}).bind("change",function(ay){if(U.saveGroupData&&U.saveGroupData!=""&&T.find(".editTip").length<=0&&ag()){setTimeout(function(){setPageChange=true;I.fkEval(U.saveGroupData)},200)}});function ar(ay){ay.bind("mouseover",function(aA){var az=B(this);clearTimeout(ap);T.mouseenter();au=true;Fai.top.Site.bindScrollLogoToolBarHide(az)}).bind("mouseleave",function(az){au=false;if(!ak()){clearTimeout(ap);ap=setTimeout(ah,200)}if(T.find(".fk-editor-vertical-rl").length<1){T.trigger("mouseleave")}}).on("click",function(az){az.stopPropagation()})}function ag(){var ay=T.attr("contenteditable");if(typeof(ay)=="undefined"||ay==false||ay=="false"){return false}else{return true}}function ak(){var ay=B("#"+U.css+"-toolBar-"+U.moduleId);if(ay.find(".linkDiv").css("display")=="block"||ay.find(".opacityDiv").css("display")=="block"||ay.find(".borderDiv").css("display")=="block"||ay.find(".shadowDiv").css("display")=="block"||ay.find(".describeDiv").css("display")=="block"||ay.find(".J_moduleNameDiv").css("display")=="block"){return true}else{return false}}var an=null;function ah(){var ay=B("#"+U.css+"-toolBar-"+U.moduleId);if(!at&&!ae){ay.find(".simpleTextTool").fadeOut(200);ay.children().not(".simpleTextTool").show();if(ay.find(".fkEditor-linkSlideBar").css("display")=="block"){ay.find(".tool-link").find("*").not(".link-tool-icon").slideUp(150)}if(ay.find(".fkEditor-slideBar").css("display")=="block"){ay.find(".fkEditor-slideBar").slideUp(150);ay.find(".fsize-tool-icon").css({left:"37px","background-position":"-73px 0"})}if(ay.find(".fkEditor-lhSlideBar").css("display")=="block"){ay.find(".fkEditor-lhSlideBar").parent().find("*").not(".lineHeight-tool-icon").slideUp(150)}if(ay.find(".fkEditor-formatBar").css("display")=="block"){ay.find(".fkEditor-formatBar").slideUp(150);ay.find(".format-tool-icon").css({left:"62px","background-position":"-73px 0"})}if(I.top.$("#fkEditor-toolBar-"+U.moduleId).length>0){an=I.top.$("#fkEditor-toolBar-"+U.moduleId).detach()}}}function Z(){if(Site.checkNestModule(T).inSubNav&&!Fai.top._subNavPackEdit){return}var aF=B("#g_main").width();var aC=ao(U);var aD=B("#"+U.css+"-toolBar-"+U.moduleId);var aE=38,aA,ay,aG,aB,az;if(!(aD.length>0&&aD.is(":visible"))){if(an&&an.length>0){B("#web").append(an);aD=an}else{aD=Y(U,aC);W(U,aD);ar(aD);if(Site.checkNestModule(T).inSubNav){aD.addClass("showInSubNavPack")}}aq(U,aD)}aA=aD.find(".J_fkEditorBar");aA.hide();al();aA.show();if(aD.data("fixRight")){aD.find(".tool .slideDiv").addClass("f-slideDiv-right");aA.each(function(){ay=B(this).outerWidth();aB=B(this).outerHeight();az=-aB;aG=-(ay-aE);B(this).css({top:az+"px",left:(aG-2)+"px"})})}else{aA.css({left:"3px",top:"46px"});aD.find(".tool .slideDiv").removeClass("f-slideDiv-right")}aD.not(".setRadiusBar").css({display:"block"}).addClass("J_fkEditor_tool").data("moduleId",U.moduleId);if(!at&&!ae){av(aD)}}function aq(aA,az){var ay="";if(aA.systemModule=="logo"){ay=(Fai.top.$("#logo").attr("_defaultlogo")==1)?"添加logo":"编辑logo"}else{ay=(T.data("imgHoverEft")&&T.data("imgHoverEft").isInit)?"添加图片":"编辑图片"}az.find(".tool-editPic .editToolIcon").text(ay)}function al(){var aG=I.top.$("#fkEditor-toolBar-"+U.moduleId),ay=true,aF=B(".floatLeftTop").offset().top,aA,az,aD,aE,aJ,aC,aB,aI,aH;aA=B("#web").offset();az=T.offset();aD=az.left;aE=az.top;aG.css("left",0);aJ=aG.outerWidth()+2;aC=(parseInt(aE-aA.top)-52);aI=B("#g_main").width();aH=aD+aJ-aI;if(T.data("floatBtn")){aC-=6}aD=aD-aA.left;aG.data("fixRight",false);if(aH>0){aD=aD-aH-20;aG.data("fixRight",true)}if(aD+aJ+160>aI){aG.data("fixRight",true)}aD=aD<0?0:aD;if(aA.top+aF>aE){aC=aE+T.outerHeight()-aF;aG.find(".setRadiusBar").hide()}aG.css({top:aC+"px",left:aD+"px"});if(aG.offset().top==0&&aG.offset().left==0){ay=true}else{ay=false}if(T.data("corpTitle")||T.data("logo")){if((top._logoPositionFixTop||top._titlePositionFixTop)&&aE<=aF){aG.css({top:parseInt(aE+T.outerHeight())+"px",position:"fixed"})}else{aG.css({position:"absolute"})}}}function ao(az){var ay=[];function aA(aB,aE,aC,aD){return ay.push({name:aB,command:aE,className:aC,title:aD})}if(az.editContent){aA("editContent","editContent","tool-editContent","编辑文字")}if(az.editPhoto){aA("editPhoto","editPhoto","tool-editPic","编辑图片")}if(az.editModule){aA("editModule","editModule","tool-editModule","编辑按钮样式")}if(az.hoverPhoto){aA("hoverPhoto","hoverPhoto","tool-hoverPic","模块特效")}if(az.photoShape){aA("photoShape","photoShape","tool-picShape","图片形状")}if(az.animation){aA("animation","animation","tool-animation","模块动画")}if(az.link){aA("link","linkcreator","tool-link","设置链接")}if(az.opacity){aA("opacity","opacity","tool-opacity","透明度")}if(az.border){aA("border","border","tool-border","边框")}if(az.shadow){aA("shadow","shadow","tool-shadow","阴影")}if(az.style){aA("style","editStyle","tool-style","编辑样式")}if(az.fixedIcon){aA("fixedIcon","fixedLogo","tool-fixed","不固定")}if(az.describePic){aA("describePic","describePic","tool-description","图片描述")}if(az.enableIcon){aA("enableIcon","enableLogo","tool-enable","隐藏logo")}if(az.moduleName){aA("moduleName","moduleName","tool-edit-name","模块标题")}if(az.deleteModule){aA("deleteModule","hideModule","tool-delete","隐藏模块")}return ay}function av(aB){var az=aB.find(".tool-animation"),aA,aD=U.moduleId,ay,aC=Fai.top.$("#module"+aD);if(typeof U.animationStatusFun=="function"&&U.animationStatusFun(aD)==1){az.show()}else{az.hide()}if(aC.data("floatImg")){if(U.moduleName){aA=aB.find(".tool-edit-name");if(Site.getSideStatus("module"+aD)==0){if(!!aA.is(":hidden")){aA.show()}}else{if(!aA.is(":hidden")){aA.hide()}}}}}function ai(ay,aE){var aD=Fai.top.$("#module"+ay),aA=aD.parent().attr("id"),az=aD.attr("_side"),aB=aE.find(".tool-edit-name"),aF,aC,aG;if(az==1){aF=aB.offset().left;if(aA=="floatLeftTopForms"||aA=="floatLeftBottomForms"){aG=-aF}else{if(aA=="floatRightTopForms"||aA=="floatRightBottomForms"){aC=aE.offset().left;aG=aC-aF-33}}aB.find(".J_moduleNamePanel").css("left",aG+"px")}}function Y(aD,aF){function aB(){var aO=[],aP="jumpHref"+aD.moduleId;if(!aD.isCommonModule){aP="jumpHref"+aD.systemModule}aO.push('<div class="linkItem f-linkItem">');aO.push('<div class="linkTip f-linkTip">链接地址：</div>');aO.push('<div class="linkSet f-linkSet"><input id="'+aP+'" class="f-jumpHref jumpHref" maxlength="255"/></div>');aO.push("</div>");aO.push('<div class="operaItem f-operaItem">');aO.push('<div class="confirm f-confirm" title="保存链接">保存</div>');aO.push('<div class="cancel f-cancel" title="取消">取消</div>');aO.push("</div>");return aO.join("")}function az(){var aO=[];aO.push('<div class="opacityBar f-slideBar" style="width:'+aD.opacityBar.width+aD.opacityBar.per+'"></div>');aO.push('<div class="opacityLhBar f-select-slideBar"></div>');aO.push('<div class="inputVal f-inputVal">'+aD.opacityBar.beginValue+"%</div>");return aO.join("")}function ay(){var aO=[];aO.push('<div class="f-item">');aO.push('<div class="f-tip">大小</div>');aO.push('<div class="setBorderSize f-slideBar"></div>');aO.push('<div class="borderSizeBar f-select-slideBar"></div>');aO.push('<div class="inputVal f-inputVal">'+aD.opacityBar.beginValue+aD.slideBar.per+"</div>");aO.push("</div>");aO.push('<div class="f-item">');aO.push('<div class="f-tip">颜色</div>');aO.push('<div class="borderColor f-color-select"></div>');aO.push("</div>");return aO.join("")}function aM(){var aO=[];aO.push('<div class="f-item">');aO.push('<div class="f-tip">X轴</div>');aO.push('<div class="setShadowX f-slideBar"></div>');aO.push('<div class="shadowXBar f-select-slideBar"></div>');aO.push('<div class="f-inputVal inputVal J_inputValX"></div>');aO.push("</div>");aO.push('<div class="f-item">');aO.push('<div class="f-tip">Y轴</div>');aO.push('<div class="setShadowY f-slideBar"></div>');aO.push('<div class="shadowYBar f-select-slideBar"></div>');aO.push('<div class="f-inputVal inputVal J_inputValY"></div>');aO.push("</div>");aO.push('<div class="f-item">');aO.push('<div class="f-tip">阴影</div>');aO.push('<div class="setShadowStyle f-slideBar"></div>');aO.push('<div class="shadowStyleBar f-select-slideBar"></div>');aO.push('<div class="f-inputVal inputVal J_inputValS"></div>');aO.push("</div>");aO.push('<div class="f-item">');aO.push('<div class="f-tip">颜色</div>');aO.push('<div class="shadowColor f-color-select"></div>');aO.push("</div>");return aO.join("")}function aH(){var aO=[];aO.push('<div class="f-descItem">');aO.push('<div class="f-descTip">输入图片描述文字：</div>');aO.push('<div class="f-descSet"><input id="logoDescription" class="f-logoDesPic" onkeyup="'+aD.changeLogoDesFunc+'" onchange="'+aD.changeLogoDesFunc+'" maxlength="50"/></div>');aO.push("</div>");return aO.join("")}function aC(){var aO="";aO+='<div class="f-descItem">';aO+='<div class="f-descTip">模块标题：</div>';aO+='<div class="f-descSet"><input class="f-module-name-input J_module-name-input" onkeyup="'+aD.moduleNameFun+'" onchange="'+aD.moduleNameFun+'" maxlength="50"/></div>';aO+="</div>";return aO}var aG=B("#"+aD.css+"-toolBar-"+aD.moduleId);if(aG.length>0){return aG}I.top.$("#web").append('<div id="'+aD.css+"-toolBar-"+aD.moduleId+'" role="toolbar" class="fkEditor-v2 fkEditorForImg" style="display:none;" unselectable></div>');aG=B("#"+aD.css+"-toolBar-"+aD.moduleId);if(T.data("floatImg")||T.data("floatBtn")||T.data("corpTitle")||T.data("logo")){}if(!aD.isCommonModule){T.data(aD.systemModule,true)}var aI="",aL="",aN="";for(var aA=0;aA<aF.length;aA++){if(!aD[aF[aA].name]){continue}aL=(aA!=0?'data-title-tip="'+aF[aA].title+'"':"");aN=(aA==0?aF[aA].title:"");aI='<a unselectable class="f-editToolIcon editToolIcon"  '+aL+" >"+aN+"</a>";if(aF[aA].name=="link"){aI='<div class="linkDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}if(aF[aA].name=="opacity"){aI='<div class="opacityDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}if(aF[aA].name=="border"){aI='<div class="borderDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}if(aF[aA].name=="shadow"){aI='<div class="shadowDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}if(aF[aA].name=="describePic"){aI='<div class="describeDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}if(aF[aA].name=="moduleName"){aI='<div class="f-module-name-div J_moduleNameDiv slideDiv" unselectable></div><a unselectable class="f-editToolIcon editToolIcon '+aF[aA].name+'-tool-icon" '+aL+" ></a>"}aG.append('<div class="tool f-tool  f-icon f-'+aF[aA].className+" "+aF[aA].className+' " role="button" data-tool="'+aA+'" unselectable>'+aI+"</div>");aG.find(".tool[data-tool="+aA+"]").find(".editToolIcon").data({command:aF[aA].command});Site.simpleTip(aG.find(".tool[data-tool="+aA+"] .editToolIcon"),0);if(aF[aA].name=="link"&&aD.openLinkPanel){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-linkSlideBar "+aD.css+'-linkSlideBar "><div class="f-linkPanel f-fkEditorBar linkPanel J_fkEditorBar" unselectable></div></div>');aG.find(".linkPanel").append(aB())}if(aF[aA].name=="opacity"){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-opacitySlideBar "+aD.css+'-opacitySlideBar "><div class="f-opacityPanel f-fkEditorBar opacityPanel J_fkEditorBar" unselectable></div></div>');aG.find(".opacityPanel").append(az())}if(aF[aA].name=="border"){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-borderSlideBar "+aD.css+'-borderSlideBar "><div class="f-borderPanel f-fkEditorBar borderPanel J_fkEditorBar" unselectable></div></div>');aG.find(".borderPanel").append(ay())}if(aF[aA].name=="shadow"){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-shadowSlideBar "+aD.css+'-shadowSlideBar "><div class="f-shadowPanel f-fkEditorBar shadowPanel J_fkEditorBar" unselectable></div></div>');aG.find(".shadowPanel").append(aM())}if(aF[aA].name=="fixedIcon"){var aE=aG.find(".tool-fixed");if(typeof aD.initFixedIcon=="function"){aD.initFixedIcon(aE)}}if(aF[aA].name=="enableIcon"){var aJ=aG.find(".tool-enable");if(Fai.top._logoData.h){aJ.find(".editToolIcon").addClass("unable");aJ.find(".editToolIcon").attr("data-title-tip","显示logo")}}if(aF[aA].name=="describePic"){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-describePicSlideBar "+aD.css+'-describePicSlideBar "><div class="f-descPanel f-fkEditorBar descPanel J_fkEditorBar" unselectable></div></div>');aG.find(".descPanel").append(aH())}if(aF[aA].name=="deleteModule"){if(!aD.isCommonModule){if(aD.systemModule=="logo"){aG.find(".tool-delete").find(".editToolIcon").attr("data-title-tip","隐藏Logo")}if(aD.systemModule=="corpTitle"){aG.find(".tool-delete").find(".editToolIcon").attr("data-title-tip","隐藏标题栏")}}}if(aF[aA].name=="editPhoto"){if(!aD.isCommonModule){if(aD.systemModule=="logo"){}}}if(aF[aA].name=="editContent"){if(!aD.isCommonModule){if(aD.systemModule=="corpTitle"){aG.find(".tool-editContent").attr("title","编辑标题栏")}}}if(aF[aA].name=="moduleName"){aG.find("."+aF[aA].className).append('<div class=" f-'+aD.css+"-moduleNameSlideBar "+aD.css+'-moduleNameSlideBar "><div class="J_moduleNamePanel f-fkEditorBar J_fkEditorBar" unselectable></div></div>');aG.find(".J_moduleNamePanel").append(aC())}if(aD.sepIndex){for(var aK=0;aK<aD.sepIndex.length;aK++){if(aD.sepIndex[aK]==aA){aG.append('<div class="f-seperator"></div>')}}}}return aG}var af=false,ae=false;function ad(aH,aL){var aD,aO,aK=false,aI=false;if(aH.setRadius){var aA=Site.getModuleAttrPattern(aH.moduleId).floatBtn.r;var aN=Site.getModuleAttrPattern(aH.moduleId).floatBtn.s.w||163,aF=Site.getModuleAttrPattern(aH.moduleId).floatBtn.s.h||52,aE;if(parseInt(aN/2)>parseInt(aF/2)){aE=parseInt(aF/2)}else{aE=parseInt(aN/2)}var az=aL.find(".setRadiusBar");if(az.length>0){return}aL.append("<div class='setRadiusBar f-setRadiusBar' title='左右拖动改变圆角'></div>");az=aL.find(".setRadiusBar");function ay(aP,aQ){ae=true}function aB(aP,aQ){aA.t=2;aA.lb=aQ.value;aA.lt=aQ.value;aA.rb=aQ.value;aA.rt=aQ.value;Site.setFlBtnRadiusChange(aH.moduleId,aA);T.find(".ui-resizable-handle").show()}function aM(aP,aQ){ae=false;Fai.top.Site.getModuleAttrPattern(aH.moduleId).changed=true;Site.styleChanged();B(aQ.handle).blur()}var aG={max:aE,min:0,orientation:"horizontal",step:2,value:aA.lt>aE?aE:aA.lt,start:ay,slide:aB,stop:aM};aL.find(".setRadiusBar").slider(aG);function aC(){if(!ae&&!aK){aL.find(".setRadiusBar").hide()}}function aJ(){if(!ae&&!aK&&!af){T.find(".ui-resizable-handle").hide()}}T.bind("mouseover",function(){af=true}).bind("mouseleave",function(){af=false;aD=setTimeout(aC,200)});T.find(".ui-resizable-handle").bind("mouseover",function(){aI=true;clearTimeout(aD);B(this).show();aL.find(".setRadiusBar").show()}).bind("mouseleave",function(){aI=false;aD=setTimeout(aC,200)});aL.find(".setRadiusBar").bind("mouseover",function(){aK=true;clearTimeout(aO)}).bind("mouseleave",function(){aK=false;aO=setTimeout(aJ,200)})}}function am(){var ay=[];function az(aC,aH,aD,aA,aB,aF,aE,aG){return ay.push({name:aC,command:aH,key:aD,tag:aA,cls:aB,emphasis:aF,className:aE,title:aG})}az("color","colors","","","0",false,"tool-color","颜色");az("b","Bold","B",["b","strong"],"1",true,"","加粗");if(U.i){az("i","Italic","I",["i","em"],"2",true,"","斜体")}az("u","Underline","U",["u"],"3",true,"","下划线");az("format","formats","","","4",false,"tool-family","");az("fsize","fSize","","","5",false,"tool-size","");if(U.lineHeight){az("lineHeight","lineHeight","","","6",false,"","行高")}if(U.left){az("left","justifyLeft","","","7",true,"tool-left","左对齐")}if(U.center){az("center","justifyCenter","","","8",true,"tool-center","居中")}if(U.right){az("right","justifyRight","","","9",true,"tool-right","右对齐")}return ay}function aj(a6,aJ){if(a6.editContent){var a5=[["SimSun","宋体"],["PMingLiU","新细明体"],["FangSong_GB2312","仿宋_GB2312"],["微软雅黑,Microsoft YaHei","微软雅黑"],["Arial","Arial"],["SimLi","隶书"],["幼圆","幼圆"],["STKaiti","华文楷体"],["方正舒体","方正舒体"],["华文行楷","华文行楷"],["华文彩云","华文彩云"],["华文宋体","华文宋体"],["楷体,楷体_GB2312,SimKai","楷体"],["黑体,SimHei","黑体"],["Tahoma","Tahoma"],["impact","impact"],["Arial Serif","Arial Serif"],["Times New Roman","Times New Roman"],["Georgia","Georgia"],["Garamond","Garamond"],["andale mono","andale mono"],["arial black,avant garde","arial black"],["comic sans ms","comic sans ms"]];a6.formats=a5;a6.formatName="字体";a6.fsizeName="大小";var aP=am();function a9(){var bf=[];bf.push('<div class="inputVal J_inputFontSize">'+a6.slideBar.beginValue+a6.slideBar.per+"</div>");bf.push('<div class="slideBar J_setFontSize" style="width:'+a6.slideBar.width+a6.slideBar.per+'"></div>');bf.push('<div class="slideBar slideFontBar J_showFontSize"></div>');return bf.join("")}function aN(){var bf=[];bf.push('<div class="inputVal">'+a6.lhSlideBar.beginValue+a6.lhSlideBar.per+"</div>");bf.push('<div class="lhSlideBar" style="width:'+a6.lhSlideBar.width+a6.lhSlideBar.per+'"></div>');bf.push('<div class="lhSlideBar lhSlideLhBar"></div>');bf.push('<div class="lhSlideSlider"></div>');return bf.join("")}function aO(bg){var bf=bg.find(".simpleTextTool");if(bf.length>0){return bf}bg.append("<div class='simpleTextTool' style='display:none;'></div>");bf=bg.find(".simpleTextTool");var bj='<a unselectable class="fkEditor-tool-icon"></a>';for(var bl=0;bl<aP.length;bl++){if(aP[bl].name=="format"||aP[bl].name=="fsize"||aP[bl].name=="lineHeight"){bj='<div class="selectDiv f-selectDiv" unselectable><span unselectable>'+a6[aP[bl].name+"Name"]+'</span></div><a unselectable class="fkEditor-tool-icon '+aP[bl].name+'-tool-icon"></a>'}bf.append('<div class="tool f-tool simpleTextTool tool'+aP[bl].cls+" "+aP[bl].className+'" role="button" data-tool="'+bl+'" unselectable title="'+aP[bl].title+'">'+bj+"</div>");bf.find(".tool[data-tool="+bl+"]").data({tag:aP[bl].tag,command:aP[bl].command,emphasis:aP[bl].emphasis});if(aP[bl].name=="fsize"){bf.find(".tool"+aP[bl].cls).append('<div class="'+a6.css+'-slideBar"><div class="'+a6.css+'-fontsizes f-fkEditorBar J_fkEditorBar" unselectable></div></div>');bf.find("."+a6.css+"-fontsizes").append(a9())}else{if(aP[bl].name=="format"&&B.isArray(a6.formats)){var bi=a6.formats[0][1].length>0&&a6.formats[0][1]!="undefined"?a6.formats[0][1]:"";bf.find(".tool"+aP[bl].cls).append('<div class="'+a6.css+'-formatBar"><div class="'+a6.css+'-formats f-fkEditorBar J_fkEditorBar" unselectable><div class="'+a6.css+'-formatContent"></div><div class="'+a6.css+'-formatSlidebg"></div><div class="'+a6.css+'-formatSlider"></div></div></div>');var bk="formatDef";for(var bh=0;bh<a6.formats.length;bh++){if(bh!=0){bk=""}bf.find("."+a6.css+"-formatContent").append("<a "+a6.css+'-formatval="'+a6.formats[bh][0]+'" '+a6.css+'-formatName="'+a6.formats[bh][1]+'" class="'+a6.css+"-format  "+bk+'" role="menuitem" unselectable><span style="font-family:'+a6.formats[bh][0]+'" class="formatMg">'+a6.formats[bh][1]+"</span></a>")}}else{if(aP[bl].name=="lineHeight"){bf.find(".tool"+aP[bl].cls).append('<div class="'+a6.css+'-lhSlideBar"><div class="'+a6.css+'-lineheights  J_fkEditorBar unselectable" style="display:none;"></div></div>');bf.find("."+a6.css+"-lineheights").append(aN())}}}bj='<a unselectable class="fkEditor-tool-icon"></a>';if(bl==0){bf.append('<div class="seperator"></div>')}}}var aA=aO(aJ);var aW="";var be=navigator.userAgent.toLowerCase();if(/msie/.test(be)){aW="-ms-"}else{if(/chrome/.test(be)||/safari/.test(be)||/yandex/.test(be)){aW="-webkit-"}else{if(/mozilla/.test(be)){aW="-moz-"}else{if(/opera/.test(be)){aW="-o-"}else{if(/konqueror/.test(be)){aW="-khtml-"}else{aW=""}}}}}aJ.find(".simpleTextTool").css(aW+"user-select","none").attr("unselectable","on").on("selectstart mousedown",false);aJ.find(".simpleTextTool").find("[unselectable]").css(aW+"user-select","none").attr("unselectable","on").on("selectstart mousedown",false);var aH=aJ.find("."+a6.css+"-slideBar");var bc=aH.find(".slideSlider");var aU=aJ.find("."+a6.css+"-formatBar");var ba=aJ.find("."+a6.css+"-lhSlideBar");var aK=ba.find(".lhSlideSlider");var a1=aJ.find(".tool-color ."+a6.css+"-tool-icon");var aT=Fai.top.Site.getModuleAttrPattern(a6.moduleId).contentLink;if(!T.data("signClassNum")){T.data("signClassNum",1)}a1.css("background",aT.c);if(a5&&a5.length>0){var aG=false;var az=aT.f;for(var a8=0;a8<a5.length;a8++){if(B.trim(a5[a8][0]).indexOf(B.trim(az))>=0){aG=true;aJ.find(".tool-family").find(".selectDiv span").attr("title",a5[a8][1]).html(a5[a8][1]);var aF=aU.find("."+a6.css+"-formatContent");aF.find(".formatDef").removeClass("formatDef");aF.find("a").eq(a8).addClass("formatDef");break}}if(!aG){aJ.find(".tool-family").find(".selectDiv span").attr("title",az).html(az)}}var aB="",aX=aU.find("."+a6.css+"-formatContent")[0],a0=aU.find("."+a6.css+"-formatSlidebg")[0],a4=aU.find("."+a6.css+"-formatSlider")[0];function aL(bf,bh,bg){this.parent=bf.parentNode;this.slider=bf;this.panel=bh;this.trigger=bg;this.h1=this.parent.clientHeight;this.h2=this.slider.offsetHeight;this.h3=this.panel.clientHeight;this.h4=this.trigger.offsetHeight;this.k=(this.h2-this.h1)/(this.h3-this.h4);this.dis=0;this.flag=false;this.init()}aL.prototype={init:function(){if(this.k<=0){this.panel.style.display="none";return}this.slider.style.top="0px";this.trigger.style.top="0px";this.bind()},bind:function(){var bf=this;this.trigger.onmousedown=function(bg){bf.down.call(bf,bg)};this.trigger.onmousemove=document.onmousemove=function(bg){bf.move.call(bf,bg)};this.trigger.onmouseup=document.onmouseup=function(bg){bf.up.call(bf,bg)}},down:function(bh){var bh=window.event||bh,bg=bh.y||bh.pageY,bf=parseInt(this.trigger.style.top);this.dis=(bg-bf);this.flag=true;this.move(bh)},move:function(bh){if(!this.flag){return}var bh=window.event||bh,bg=bh.y||bh.pageY,bf;bf=Math.min(Math.max(bg-this.dis,0),(this.h3-this.h4));this.slider.style.top=-bf*this.k+"px";this.trigger.style.top=bf+"px"},up:function(){this.flag=false}};function a2(){if(aB==""){aB=new aL(aX,a0,a4)}}function bb(){if(ax){a(false,ab)}var bf=aU.find(".J_fkEditorBar").css("display")=="block"?true:false;if(!bf){aU.find(".formatDef").addClass("J_formatDef").removeClass("formatDef")}aU.parent().find("*").stop(true,false).slideDown(300);aJ.find(".format-tool-icon").css({left:"65px","background-position":"-308px 0"});setTimeout(function(){if(!bf){aU.find(".J_formatDef").addClass("formatDef").removeClass("J_formatDef")}a2()},400)}w(a6,aJ);function aD(){aU.find("a").click(function(bg){if(ax){n(ab.data("range"))}aU.find(".formatDef").removeClass("formatDef");B(this).addClass("formatDef");aJ.find(".tool-family").find(".selectDiv span").attr("title",B(this).attr(a6.css+"-formatName")).html(B(this).attr(a6.css+"-formatName"));if(!a6.isCommonModule){D("fontname",B(this).attr(a6.css+"-formatval"))}else{aT.y=1}Fai.top.Site.getModuleAttrPattern(a6.moduleId).contentLink.f=B(this).attr(a6.css+"-formatName");Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;T.find(".lightModuleOuterContent"+a6.moduleId).find("a").css("font-family","'"+B(this).attr(a6.css+"-formatName")+"'");Site.styleChanged()}).hover(function(){aU.find(".formatDef").removeClass("formatDef");B(this).addClass("formatDef")});var bf=aU.find(".fkEditor-formatContent").find(".fkEditor-format").length;aU.bind("mousewheel",function(bj,bk){var bh=aU.find(".fkEditor-formatSlider").position().top;var bi=aU.find(".fkEditor-formatContent").height()-150;if(bk==1){if(bh>0){bh=bh<0?0:bh;aU.find(".fkEditor-formatSlider").css({top:(bh-(100/bf))+"px"});aU.find(".fkEditor-formatContent").css({top:-(bi*(bh/100)-18)+"px"})}}else{var bg=18;if(/chrome/.test(be)){bg=5}if(bh<100){bh=bh>100?100:bh;aU.find(".fkEditor-formatSlider").css({top:(bh+(100/bf))+"px"});aU.find(".fkEditor-formatContent").css({top:-(bi*(bh/100)+parseInt(bg))+"px"})}}return false})}aD();function aC(bg){var bf;return function(){return bf||(bf=bg.apply(this,arguments))}}function a7(){var bt=a6.moduleId,bp=a6.slideBar,bv=bp.per,bj=parseInt(bp.beginValue),by=Fai.top.Site.getModuleAttrPattern(bt).contentLink,bf=by.ls||N("font-size").replace(/px/g,""),bw=bf+bv,bk=aH.find(".J_setFontSize"),bx=aH.find(".J_showFontSize"),bu=aH.find(".J_inputFontSize"),bi=aJ.find(".tool-size").find(".selectDiv span"),bo=T.find(".lightModuleOuterContent"+bt).find("a"),bs;bh(bf);bn(bf);bu.html(bw);bs={animate:true,max:bj+bk.width(),min:bj,orientation:"horizontal",value:bf,step:1,slide:br,stop:bl};bk.slider(bs);X(bu,{onChange:function(bz){bq(bz);bg(bz);bk.slider("value",bz)},minVal:bs.min,maxVal:bs.max,per:bv,maxLength:((bs.max+"").length+1)});return true;function br(bz,bC){var bB=bC.value,bA=bB+bv;bq(bB);bu.html(bA);if(!a6.isCommonModule){if(T.data("hasSelectText")==true){f("font-size",bB,T,true,"","","",true)}else{}}}function bl(bz,bB){var bA=bB.value;bg(bA)}function bq(bz){bh(bz);bn(bz);bm(bz)}function bh(bB){var bA=2,bz=bB-bj+bA,bC=bz+bv;bx.css("width",bC)}function bn(bA){var bz=bA+bv;bi.attr("title",bz).html(bz)}function bm(bA){var bz=bA+bv;bo.css("font-size",bz)}function bg(bz){by.y=1;by.ls=bz;Fai.top.Site.getModuleAttrPattern(bt).changed=true;Site.styleChanged()}}var aE=aC(a7);function bd(){if(a6.moduleId=="corpTitle"){a7()}else{aE()}aH.parent().find("*").stop(true,false).slideDown(200);aJ.find(".fsize-tool-icon").css({left:"40px","background-position":"-308px 0"});aH.off("click.fs").on("click.fs",function(bf){bf.stopPropagation();B(this).find(".J_inputFontSize").trigger("blur")})}function aV(){w(a6,aJ);ba.parent().find("*").stop(true,false).slideDown(200)}function aZ(){aH.find("*").slideUp(150);aJ.find("."+a6.css+"-slideBar").slideUp(100);aJ.find(".fsize-tool-icon").css({left:"37px","background-position":"-73px 0"})}function aM(){aU.find("*").slideUp(150);aJ.find("."+a6.css+"-formatBar").slideUp(100);aJ.find(".format-tool-icon").css({left:"62px","background-position":"-73px 0"})}function a3(){setTimeout(function(){ba.find("*").slideUp(150);setTimeout(function(){ba.parent().find(".selectDiv").css("display","none")},150)},20)}function aI(bh,bg){var bf=bg.find("."+bh.css+"-lhSlideBar");bf.parent().find("*").stop(true,false).slideDown(200);if(bf.is(":visible")){g("lhbar",bh)}else{g("",bh)}}function aR(bf){if(bf!="formats"){aM()}if(bf!="fSize"){aZ()}if(bf!="lineHeight"){a3()}if(bf!="faiColorPickerAlp"){B(".J_faiColorPickerAlp").slideUp(150)}}function aS(bn){var bh=a6.css+"-tool-depressed";var bg='<div class="'+bh+'"></div>';var bk=B(bn).data("command");aQ(bh,bk);if(bk=="formats"){aR("formats");if(aJ.find("."+a6.css+"-formatBar").css("display")=="block"){aM()}else{bb()}}else{if(bk=="fSize"){aR("fSize");if(aJ.find("."+a6.css+"-slideBar").css("display")=="block"){aZ()}else{bd()}if(!a6.isCommonModule){if(T.data("hasRefreshClick")==true){var bi=B.trim(a(true,aJ)).length>0?true:false;T.data("hasSelectText",bi);if(bi){f("xxxx","",T,false)}}}}else{if(bk=="colors"){aR("faiColorPickerAlp");T.data("colorEdit",true);if(a6.isCommonModule){function bj(bq,br){var bp=br||bq;if(t(bp)){a1.css("border","solid 1px #ccc")}else{a1.css("border","0px")}a1.css("background",bp);aT.y=1;aT.fct=1;Fai.top.Site.getModuleAttrPattern(a6.moduleId).contentLink.c=bp;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;T.find(".lightModuleOuterContent"+a6.moduleId).find("a").css("color",bp);Site.styleChanged()}function bl(bq,bp){if(bq==2){if(t(bp)){a1.css("border","solid 1px #ccc")}else{a1.css("border","0px")}a1.css("background",bp);aT.y=1;aT.fct=1;Fai.top.Site.getModuleAttrPattern(a6.moduleId).contentLink.c=bp;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;T.find(".lightModuleOuterContent"+a6.moduleId).find("a").css("color",bp);Site.styleChanged()}}var bf={moduleId:a6.moduleId,target:a1,inputHexStatus:bl,onchange:bj,isSystemModule:!a6.isCommonModule,appendToWeb:a6.isCommonModule?true:false};B(bn).faiColorPickerAlp(bf)}else{T.data("colorEdit",true);function bo(bp,bq){x.simpleTextColorInputHexStatus(2,bp,bq,Fai.top.$("#corpTitle"),a6);Site.corpTitleChange()}function bm(bq,bp){x.simpleTextColorInputHexStatus(bq,bp,"",Fai.top.$("#corpTitle"),a6);Site.corpTitleChange()}var bf={moduleId:a6.moduleId,target:a1,inputHexStatus:bm,onchange:bo,isSystemModule:!a6.isCommonModule,appendToWeb:a6.isCommonModule?true:false};B(bn).faiColorPickerAlp(bf);T.data("colorToolShow",true);x.simpleTextColorInputHexStatus(1,"","",T,a6)}}else{if(bk=="Bold"){g("",a6);if(!a6.isCommonModule){D("Bold",null)}else{if(aT.b){aJ.find(".tool1").find(".fkEditor-tool-depressed").remove();aT.b=0;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;Site.setModuleStyleCssList(a6.moduleId,[{cls:".lightModuleOuterContent"+a6.moduleId+" a",key:"font-weight",value:"normal"}])}else{aJ.find(".tool1").append(bg);aT.y=1;aT.b=1;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;Site.setModuleStyleCssList(a6.moduleId,[{cls:".lightModuleOuterContent"+a6.moduleId+" a",key:"font-weight",value:"bold"}])}}Site.styleChanged()}else{if(bk=="Underline"){g("",a6);if(!a6.isCommonModule){D("Underline",null)}else{if(aT.d){aJ.find(".tool3").find(".fkEditor-tool-depressed").remove();aT.d=0;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;Site.setModuleStyleCssList(a6.moduleId,[{cls:".lightModuleOuterContent"+a6.moduleId+" a",key:"text-decoration",value:"none"},{cls:".lightModuleOuterContent"+a6.moduleId+" .pagenation_N a span",key:"text-decoration",value:"none"}])}else{aJ.find(".tool3").append(bg);aT.y=1;aT.d=1;Fai.top.Site.getModuleAttrPattern(a6.moduleId).changed=true;Site.setModuleStyleCssList(a6.moduleId,[{cls:".lightModuleOuterContent"+a6.moduleId+" a",key:"text-decoration",value:"underline"},{cls:".lightModuleOuterContent"+a6.moduleId+" .pagenation_N a span",key:"text-decoration",value:"underline"}])}}Site.styleChanged()}else{if(bk=="lineHeight"){aR("lineHeight");if(ba.find(".J_fkEditorBar").css("display")=="block"){a3()}aI(a6,aJ)}else{D(bk,null)}}}}}}aY(bn,bk)}function aY(bg,bh){var bi=a6.css+"-tool-depressed";var bf='<div class="'+bi+'"></div>';if(!bh||a6.isCommonModule){return}if(B(bg).data("emphasis")==true&&(B(bg).find("."+bi).length<=0)){B(bg).append(bf)}else{B(bg).find("."+bi).remove()}I.fkEval(a6.saveGroupData)}function aQ(bg,bf){if(a6.isCommonModule){return}if(bf=="justifyLeft"||bf=="justifyCenter"||bf=="justifyRight"){aJ.find(".tool-left").find("."+bg).remove();aJ.find(".tool-center").find("."+bg).remove();aJ.find(".tool-right").find("."+bg).remove()}}var ay=aJ.find(".simpleTextTool");ay.off("click.BtnClick").on("click.BtnClick",function(bf){bf.stopPropagation();aS(this)})}}var at=false;var X=function(ay,aA){var aC,aB,az;az=function(aF){var aJ,aH,aI;aJ={onChange:function(){},maxVal:100,per:"%",minVal:0,maxLength:3};aF=B.extend({},aJ,aF);aH=function(){this.cache=[]};aH.prototype.add=function(aV,aU,aS){var aQ=this;for(var aR=0,aT;aT=aU[aR++];){(function(aX){var aW=aX.split(":");aQ.cache.push(function(){var aY=aW.shift();aW.unshift(aV);aW.push(aS);return aI[aY].apply(aV,aW)})})(aT)}};aH.prototype.start=function(){for(var aQ=0,aR;aR=this.cache[aQ++];){var aS=aR();if(aS){return aS}}};aI={isNumberKey:function(aQ,aR){if(!Fai.isNumberKey(aQ._event)){return aR}},maxLength:function(aQ,aS,aR){if(aQ._length>=aS){return aR}},maxVal:function(aQ,aS,aR){if(aQ._value>aS){aM(aQ,aS);aw(aQ);aQ.focus();return aR}},minVal:function(aR,aQ,aS){if(aR._value<aQ){return aS}},isEditable:function(aQ,aR){if(aQ.hasClass("J_contentEditable contentEditable")){return aR}}};function aP(aQ,aR){aR?aQ.attr("contenteditable",aR).addClass("J_contentEditable contentEditable"):aQ.removeAttr("contenteditable").removeClass("J_contentEditable contentEditable")}function aM(aQ,aS,aR){aQ.html(aS+(aR||""))}function aK(aQ){return parseInt(aQ.html().replace(aF.per,"")||0)||0}function aL(aQ,aR){aQ._value=aK(aQ);aQ._length=aQ.html().length;aQ._event=aR}function aN(aQ,aT){var aR=new aH();aR.add(aQ,["isEditable"],"可编辑状态中");var aS=aR.start();if(aS){return aS}aP(aQ,true);aQ.html(aK(aQ));o(aQ[0]);if(Fai.isMozilla()){aQ.focus()}}function aG(aQ,aT){var aR=new aH();aL(aQ,aT);aR.add(aQ,["isNumberKey"],"请输入数字");aR.add(aQ,["maxLength:"+aF.maxLength],"数字已达最大长度");var aS=aR.start();if(aS){return false}}function aD(aQ,aT){var aR=new aH();aL(aQ,aT);aR.add(aQ,["maxVal:"+aF.maxVal],"超过最大值");var aS=aR.start();aE(aQ,aT);if(aS){return aS}}function aE(aQ,aT){var aR=new aH();aL(aQ,aT);aR.add(aQ,["minVal:"+aF.minVal],"小于最小值");var aS=aR.start();var aU=aK(aQ);if(aS){aU=aF.minVal}aF.onChange(aU)}function aO(aQ,aT){var aR=new aH();aL(aQ,aT);aR.add(aQ,["minVal:"+aF.minVal],"小于最小值");var aS=aR.start();var aU=aK(aQ);if(aS){aU=aF.minVal}aM(aQ,aU,aF.per);aP(aQ,false)}return{click:aN,keypress:aG,keyup:aD,blur:aO}};aC=function(){var aE=["click"," keypress"," keyup"," blur",""],aD=".sliderInput";ay.off(aD).on(aE.join(aD),function(aF){aF.stopPropagation();return az(aA)[aF.type](B(this),aF)})};aB=function(){ay.length&&aC();return ay};return aB()};var ac=false;function aw(aA,az){if(az){if(!ac){return}}if(window.getSelection){var ay=window.getSelection();ay.selectAllChildren(aA[0]);ay.collapseToEnd()}else{if(document.selection){var ay=document.selection.createRange();ay.moveToElementText(aA[0]);ay.collapse(false);ay.select()}}ac=true}function W(aE,aF){var aG=aF.find(".editToolIcon");var az=aF.find("."+aE.css+"-linkSlideBar");var aD=aF.find("."+aE.css+"-opacitySlideBar");var aA=aF.find("."+aE.css+"-borderSlideBar");var aC=aF.find("."+aE.css+"-shadowSlideBar");function aB(){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);aF.find(".tool-border").find("*").not(".border-tool-icon").slideUp(200);aF.find(".tool-shadow").find("*").not(".shadow-tool-icon").slideUp(200);aF.find(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200);aF.find(".tool-edit-name").find("*").not(".moduleName-tool-icon").slideUp(200)}aG.unbind("click").bind("click",function(aH){ay(this)});aF.find(".tool-link .linkPanel .cancel").unbind("click").click(function(aH){az.parent().find("*").not(".link-tool-icon").slideUp(150)});aF.find(".tool-link .linkPanel .confirm").unbind("click").click(function(aH){if(aE.saveJumpCtrlFun&&aE.saveJumpCtrlFun!=""){if(I.fkEval(aE.saveJumpCtrlFun)){az.parent().find("*").not(".link-tool-icon").slideUp(150);L()}}});aF.off("click.hideColorPanel").on("click.hideColorPanel",".J_fkEditorBar, .editToolIcon",function(){B(".J_faiColorPickerAlp").remove()});function ay(aV){if(B(aV).data("command")=="linkcreator"){aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);aF.find(".tool-border").find("*").not(".border-tool-icon").slideUp(200);aF.find(".tool-shadow").find("*").not(".shadow-tool-icon").slideUp(200);aF.find(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200);if(aE.openLinkPanel){if(az.css("display")=="block"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.addClass("floatBtnEdit");L();aF.removeClass("floatBtnEdit")}else{az.parent().find("*").stop(true,false).slideDown(200);b(aE.moduleId,"notHide")}}if(aE.jumpCtrlFun&&aE.jumpCtrlFun!=""){I.fkEval(aE.jumpCtrlFun)}}else{if(B(aV).data("command")=="hideModule"){ah();aB();if(aE.deleteFun&&aE.deleteFun!=""){I.fkEval(aE.deleteFun)}if(aE.systemModule=="corpTitle"){Fai.ing("您可以从“设置”-“基础设置”中重新开启。",true)}if(aE.systemModule=="logo"){var aN=B("#fkEditor-toolBar-corpTitle").find(".tool-enable");aN.find(".editToolIcon").addClass("unable").attr("data-title-tip","显示logo");Fai.ing("您可以通过标题栏的编辑工具栏来显示logo。",true)}}else{if(B(aV).data("command")=="editStyle"){ah();aB();if(aE.setModuleStyle&&aE.setModuleStyle!=""){I.fkEval(aE.setModuleStyle)}}else{if(B(aV).data("command")=="editPhoto"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);B(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200);if(aE.editPicFun&&aE.editPicFun!=""){I.fkEval(aE.editPicFun)}}else{if(B(aV).data("command")=="hoverPhoto"){if(aE.hoverPicFun&&aE.hoverPicFun!=""){I.fkEval(aE.hoverPicFun)}}else{if(B(aV).data("command")=="photoShape"){if(aE.picShapeFun&&aE.picShapeFun!=""){I.fkEval(aE.picShapeFun)}}else{if(B(aV).data("command")=="editModule"){ah();aB();if(aE.editModuleFun&&aE.editModuleFun!=""){I.fkEval(aE.editModuleFun)}}else{if(B(aV).data("command")=="opacity"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-border").find("*").not(".border-tool-icon").slideUp(200);aF.find(".tool-shadow").find("*").not(".shadow-tool-icon").slideUp(200);aF.find(".tool-edit-name").find("*").not(".moduleName-tool-icon").slideUp(200);if(aD.css("display")=="block"){aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);aF.addClass("floatBtnEdit");L();aF.removeClass("floatBtnEdit")}else{var aS=100-Fai.top.Site.getModuleAttrPattern(aE.moduleId).transparent;var aK=aD.find(".opacityBar").css("left");aD.find(".inputVal").html(aS+"%");aD.find(".opacityLhBar").css("width",aS+aE.opacityBar.per);aD.parent().find("*").stop(true,false).slideDown(200);var aQ={animate:true,max:90,min:0,orientation:"horizontal",step:1,value:aS,slide:aR,stop:a9};setTimeout(function(){B(".opacityBar").slider(aQ);X(aD.find(".inputVal"),{onChange:function(bf){B(".opacityBar").slider("value",bf);aD.find(".opacityLhBar").css("width",bf+aE.opacityBar.per);Site.refreshFloatImgOpacity(aE.moduleId,bf);Fai.top.Site.getModuleAttrPattern(aE.moduleId).transparent=(100-bf);a9()},maxVal:aD.find(".opacityBar").width()})},200);function aR(bf,bg){aD.find(".opacityLhBar").css("width",bg.value+aE.opacityBar.per);aD.find(".inputVal").html(bg.value+"%");Site.refreshFloatImgOpacity(aE.moduleId,bg.value);Fai.top.Site.getModuleAttrPattern(aE.moduleId).transparent=(100-bg.value)}function a9(bf,bg){Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}b(aE.moduleId,"notHide")}}else{if(B(aV).data("command")=="border"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);aF.find(".tool-shadow").find("*").not(".shadow-tool-icon").slideUp(200);if(aA.css("display")=="block"){aF.find(".tool-border").find("*").not(".border-tool-icon").slideUp(200);aF.addClass("floatBtnEdit");L();aF.removeClass("floatBtnEdit")}else{var ba=Fai.top.Site.getModuleAttrPattern(aE.moduleId).floatBtn.b;var aP=8,aH=0,a3=1,bd=ba.w||0;if(ba.t==0){bd=0}var aO={animate:true,max:aP,min:aH,orientation:"horizontal",step:a3,value:bd,slide:a5,stop:aT};B(".setBorderSize").slider(aO);aA.find(".inputVal").html(bd+"px");aA.find(".borderSizeBar").css("width",(bd*11)+"px");aA.find(".borderColor").css("background",ba.c);X(aA.find(".inputVal"),{onChange:function(bf){B(".setBorderSize").slider("value",bf);aA.find(".borderSizeBar").css("width",(bf*11)+"px");ba.t=2;ba.w=bf;Site.setFlBtnBorderChang(aE.moduleId,ba);aT()},maxVal:aP,per:"px"});function a5(bf,bg){aA.find(".borderSizeBar").css("width",(bg.value*11)+"px");ba.t=2;ba.w=bg.value;aA.find(".inputVal").html(bg.value+"px");Site.setFlBtnBorderChang(aE.moduleId,ba)}function aT(bf,bg){Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}aA.find(".borderColor").off("click.b").on("click.b",function(bh){Fai.isMozilla()&&bh.stopPropagation();function bg(bj){aA.find(".borderColor").css("background",bj);ba.t=2;ba.c=bj;Site.setFlBtnBorderChang(aE.moduleId,ba);Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}function bf(bk,bj){if(bk==2){aA.find(".borderColor").css("background",bj);ba.t=2;ba.c=bj;Site.setFlBtnBorderChang(aE.moduleId,ba);Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}}var bi={moduleId:aE.moduleId,target:aA.find(".borderColor"),inputHexStatus:bf,onchange:bg,appendToWeb:aE.isCommonModule?true:false,hideAfterSet:true,__left:328,__top:83};B(aV).faiColorPickerAlp(bi)});aA.parent().find("*").stop(true,false).slideDown(200);b(aE.moduleId,"notHide")}}else{if(B(aV).data("command")=="shadow"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-border").find("*").not(".border-tool-icon").slideUp(200);aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);if(aC.css("display")=="block"){aF.find(".tool-shadow").find("*").not(".shadow-tool-icon").slideUp(200);aF.addClass("floatBtnEdit");L();aF.removeClass("floatBtnEdit")}else{var aZ=Fai.top.Site.getModuleAttrPattern(aE.moduleId).floatBtn.sh;var a1=aZ.dx,a0=aZ.dy,bc=aZ.f;if(aZ.t==0){a1=0;a0=0;bc=0}var aM={animate:true,max:110,min:0,orientation:"horizontal",step:1,value:a1,slide:a4,stop:bb};var a7={animate:true,max:110,min:0,orientation:"horizontal",step:1,value:a0,slide:aI,stop:bb};var aL={animate:true,max:110,min:0,orientation:"horizontal",step:1,value:bc,slide:aY,stop:bb};B(".setShadowX").slider(aM);aC.find(".J_inputValX").html(a1+"px");X(aC.find(".J_inputValX"),{onChange:function(bf){B(".setShadowX").slider("value",bf);aC.find(".shadowXBar").css("width",bf+"px");aZ.t=2;aZ.dx=bf;Site.setFlBtnShadowChange(aE.moduleId,aZ);bb()},per:"px",maxVal:aM.max,maxLength:4});B(".setShadowY").slider(a7);aC.find(".J_inputValY").html(a0+"px");X(aC.find(".J_inputValY"),{onChange:function(bf){B(".setShadowY").slider("value",bf);aC.find(".shadowYBar").css("width",bf+"px");aZ.t=2;aZ.dy=bf;Site.setFlBtnShadowChange(aE.moduleId,aZ);bb()},per:"px",maxVal:a7.max,maxLength:4});B(".setShadowStyle").slider(aL);aC.find(".J_inputValS").html(bc+"px");X(aC.find(".J_inputValS"),{onChange:function(bf){B(".setShadowStyle").slider("value",bf);aC.find(".shadowStyleBar").css("width",bf+"px");aZ.t=2;aZ.f=bf;Site.setFlBtnShadowChange(aE.moduleId,aZ);bb()},per:"px",maxVal:aL.max});aC.find(".shadowXBar").css("width",(aZ.dx)+"px");aC.find(".shadowYBar").css("width",(aZ.dy)+"px");aC.find(".shadowStyleBar").css("width",(aZ.f)+"px");aC.find(".shadowColor").css("background",aZ.c);function a4(bf,bg){aC.find(".shadowXBar").css("width",(bg.value)+"px");aC.find(".J_inputValX").html(bg.value+"px");aZ.t=2;aZ.dx=bg.value;Site.setFlBtnShadowChange(aE.moduleId,aZ)}function aI(bf,bg){aC.find(".shadowYBar").css("width",(bg.value)+"px");aC.find(".J_inputValY").html(bg.value+"px");aZ.t=2;aZ.dy=bg.value;Site.setFlBtnShadowChange(aE.moduleId,aZ)}function aY(bf,bg){aC.find(".shadowStyleBar").css("width",(bg.value)+"px");aC.find(".J_inputValS").html(bg.value+"px");aZ.t=2;aZ.f=bg.value;Site.setFlBtnShadowChange(aE.moduleId,aZ)}function bb(bf,bg){Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}aC.find(".shadowColor").off("click.s").on("click.s",function(bh){Fai.isMozilla()&&bh.stopPropagation();function bg(bj){aC.find(".shadowColor").css("background",bj);aZ.t=2;aZ.c=bj;Site.setFlBtnShadowChange(aE.moduleId,aZ);Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}function bf(bk,bj){aC.find(".shadowColor").css("background",bj);aZ.t=2;aZ.c=bj;Site.setFlBtnShadowChange(aE.moduleId,aZ);Fai.top.Site.getModuleAttrPattern(aE.moduleId).changed=true;Site.styleChanged()}var bi={moduleId:aE.moduleId,target:aC.find(".shadowColor"),inputHexStatus:bf,onchange:bg,appendToWeb:aE.isCommonModule?true:false,hideAfterSet:true,__left:478,__top:153};B(aV).faiColorPickerAlp(bi)});aC.parent().find("*").stop(true,false).slideDown(200);b(aE.moduleId,"notHide")}}else{if(B(aV).data("command")=="editContent"){var aW=T.find("#module"+aE.moduleId+"FlBtn"),aJ;if(!aE.isCommonModule){aW=T;aJ=aW.find(".editTip")}at=true;aB();aF.children().hide();aF.find(".simpleTextTool").fadeIn(500);T.addClass("formLockEdit");aF.addClass("floatBtnEdit");aW.attr("contenteditable",true);aW.css("cursor","text");B("#"+aE.css+"-"+aE.moduleId).data("hasRefreshClick",true);T.data("hasRefreshClick",true);aW.focus(function(){B(this).css("white-space","normal")}).focusout(function(){B(this).css("white-space","nowrap")});ac=true;aw(aW,true);T.find(".ui-resizable-handle").show();B(document).unbind("click.btnToolHide").bind("click.btnToolHide",function(){if(!at){T.unbind("mouseout.showResizable")}if(!af){if(!d().toString()){aW.attr("contenteditable",false);T.removeClass("formLockEdit");at=false;ah();aF.removeClass("floatBtnEdit");aF.children().show();aW.css("cursor","move");aF.find(".simpleTextTool").hide();B("#fkEditor-toolBar-"+aE.moduleId).css("width","246px")}}});T.bind("mouseout.showResizable",function(){T.find(".ui-resizable-handle").show()});al();Site.checkSimpleTextHideTool(aE.moduleId);J(aE,am(),aE);b(aE.moduleId,"other");if(aJ&&aJ.length>0){T.html("请输入网站标题");l(T)}else{if(T.text()=="请输入网站标题"){l(T)}}}else{if(B(aV).data("command")=="animation"){ah();aB();if(aE.animationFun&&aE.animationFun!=""){I.fkEval(aE.animationFun)}}else{if(B(aV).data("command")=="fixedLogo"){var aU=B(aV);if(typeof aE.changeFixedIcon=="function"){aE.changeFixedIcon(aU)}aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200)}else{if(B(aV).data("command")=="describePic"){aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);var a8=B(".fkEditor-describePicSlideBar");if(a8.css("display")=="block"){aF.find(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200);L()}else{aF.find(".tool-description").find("*").stop(true,false).slideDown(200);b(aE.moduleId,"notHide")}B("#logoDescription").val(Fai.decodeHtml(Fai.top._logoData.des)).focus()}else{if(B(aV).data("command")=="enableLogo"){var aU=B(aV),a6=aU.parent(),be=!!aU.hasClass("unable");if(be){aU.removeClass("unable");a6.find(".editToolIcon").attr("data-title-tip","隐藏Logo")}else{aU.addClass("unable");a6.find(".editToolIcon").attr("data-title-tip","显示Logo")}aF.find(".tool-link").find("*").not(".link-tool-icon").slideUp(200);aF.find(".tool-description").find("*").not(".describePic-tool-icon").slideUp(200);Fai.top.Site.logoDisplayChange(be);Site.styleChanged()}else{if(B(aV).data("command")=="moduleName"){aF.find(".tool-opacity").find("*").not(".opacity-tool-icon").slideUp(200);var a2=aF.find(".tool-edit-name .fkEditor-moduleNameSlideBar"),aX=T.find(".mainTitle"+aE.moduleId).first().text();if(!a2.is(":hidden")){aF.find(".tool-edit-name").find("*").not(".moduleName-tool-icon").slideUp(200);L()}else{aF.find(".tool-edit-name").find("*").stop(true,false).slideDown(200);b(aE.moduleId,"other")}a2.find(".J_module-name-input").val(aX).focus()}}}}}}}}}}}}}}}}aF.find(".tool .editToolIcon").removeClass("f-button-tip-vertical").removeClass("f-button-bottom").removeClass("f-button-tip")}}})};function L(){var Q=B(".fk-dialog-hidden-mask");if(Q.length>0){Q.trigger("click")}}function b(U,S){var Q=Fai.top.$("#bannerV2");var R={id:U,useClass:true,leftClass:"fk-dialog-hidden-mask",rightClass:"fk-dialog-hidden-mask",topClass:"fk-dialog-hidden-mask",bottomClass:"fk-dialog-hidden-mask",centerClass:"fk-dialog-center-mask",extFn:[{name:"click.dialogmask",fn:function(){T(U,S);if(Q.length&&Q.find("#module"+U).length){Site.bannerV2.startBannerInterval()}}}]};Site.addModuleMask(R);if(Q.length&&Q.find("#module"+U).length){setTimeout(function(){Site.bannerV2.stopBannerInterval()},300)}B("#g_main").off("mousewheel.disabledScroll").on("mousewheel.disabledScroll",function(V){setTimeout(function(){Site.addModuleMask(R)},200)});function T(Y,X){if("simpleTextEdit"==X){Site.checkSimpleTextHideTool()}else{if("notHide"==X){var W=B("#module"+Y),V=W.find(".floatBtn")}else{}}if(Fai.top.$(".moduleMaskContainer").length>0){Site.removeModuleMask()}B("#g_main").off("mousewheel.disabledScroll")}}})(jQuery,Fai);